"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[126],{1126:(W,A,l)=>{l.r(A),l.d(A,{SmaModule:()=>Y});var d=l(6814),g=l(6223),U=l(9157),T=l(2032),x=l(2296),f=l(617),_=l(3305),k=l(2599),P=l(3176),s=l(3751),O=l(5501),y=l(1896),w=l(9383),e=l(5879),J=l(3367);function Q(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"mb-line-style-selector",3),e.NdJ("selectionChange",function(t){e.CHM(n);const o=e.oxw();return e.KtG(o.updateStyle(t))}),e.qZA()}if(2&i){const n=e.oxw();e.Q6J("initial",n.current.style)("label","Line")}}let j=(()=>{var i;class r{constructor(){this.removed=new e.vpe,this.changed=new e.vpe}set initial(a){this.current=a}updateStyle(a){this.current.style=a,this.changed.emit(this.current)}updateParams(a){this.current.params=a,this.changed.emit(this.current)}remove(){this.removed.emit(this.current)}}return(i=r).\u0275fac=function(a){return new(a||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-sma-params"]],inputs:{initial:"initial"},outputs:{removed:"removed",changed:"changed"},decls:6,vars:2,consts:[["mat-icon-button","","color","warn",3,"click"],[3,"initial","selectionChange"],[3,"initial","label","selectionChange",4,"ngIf"],[3,"initial","label","selectionChange"]],template:function(a,t){1&a&&(e.TgZ(0,"div")(1,"button",0),e.NdJ("click",function(){return t.remove()}),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()(),e.TgZ(4,"mb-simple-moving-average-params",1),e.NdJ("selectionChange",function(m){return t.updateParams(m)}),e.qZA(),e.YNc(5,Q,1,2,"mb-line-style-selector",2),e.qZA()),2&a&&(e.xp6(4),e.Q6J("initial",t.current.params),e.xp6(1),e.Q6J("ngIf",t.current.showStyle))},dependencies:[d.O5,x.RK,f.Hw,s.ym6,s.zoJ],changeDetection:0}),r})();function H(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"app-sma-params",2),e.NdJ("changed",function(t){e.CHM(n);const o=e.oxw();return e.KtG(o.updated(t))})("removed",function(t){e.CHM(n);const o=e.oxw();return e.KtG(o.removed(t))}),e.qZA()}2&i&&e.Q6J("initial",r.$implicit)}const F=()=>{const i=new s.TD4;return i.color="",i.width=1.5,i.dash="",i.interpolation="camullRom",i},v=(i,r,n)=>({params:{length:r,barComponent:n},style:F(),showStyle:i});let D=(()=>{var i;class r{constructor(){this.changed=new e.vpe,this.smaArray=[],this.colorArray=["#ff0000"],this.initialized=!1}set initial(a){const t=[];for(let o=0;o<a.length.length;o++){const m=v(a.showStyle,a.length[o],a.barComponent);m.style.color=this.colorArray[o%this.colorArray.length],t.push(m)}this.smaArray=t,this.defaultBarComponent=a.barComponent}set colors(a){if(a&&a.length>0){const t=[];this.colorArray=a;for(let o=0;o<this.smaArray.length;o++){const m={...this.smaArray[o]};m.style.color=a[o%a.length],t.push(m)}this.smaArray=t}}ngAfterViewInit(){this.initialized=!0,this.changed.emit(this.smaArray)}add(){const a=this.getShowStyle(),t=v(a,this.getLastLength()+5,this.defaultBarComponent);a&&(t.style.color=this.colorArray[this.smaArray.length%this.colorArray.length]),this.smaArray.push(t),this.smaArray=[...this.smaArray],this.notify()}updated(a){this.getIndex(a)>=0&&this.notify()}removed(a){const t=this.getIndex(a);t>=0&&(this.smaArray.splice(t,1),this.smaArray=[...this.smaArray],this.notify())}getLastLength(){const a=this.smaArray.length-1;return a<0?0:this.smaArray[a].params.length}getShowStyle(){return!(this.smaArray.length<=0)&&this.smaArray[0].showStyle}getIndex(a){for(let t=0;t<this.smaArray.length;t++)if(this.smaArray[t]===a)return t;return-1}notify(){this.initialized&&this.changed.emit(this.smaArray)}}return(i=r).\u0275fac=function(a){return new(a||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-sma-list"]],inputs:{initial:"initial",colors:"colors"},outputs:{changed:"changed"},decls:5,vars:1,consts:[[3,"initial","changed","removed",4,"ngFor","ngForOf"],["mat-mini-fab","","color","primary",3,"click"],[3,"initial","changed","removed"]],template:function(a,t){1&a&&(e.YNc(0,H,1,1,"app-sma-params",0),e.TgZ(1,"div")(2,"button",1),e.NdJ("click",function(){return t.add()}),e.TgZ(3,"mat-icon"),e._uU(4,"add"),e.qZA()()()),2&a&&e.Q6J("ngForOf",t.smaArray)},dependencies:[d.sg,x.nh,f.Hw,j]}),r})();function N(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"mat-expansion-panel",15)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),e._uU(4,"tune"),e.qZA()()(),e.TgZ(5,"mb-swatches-select",16),e.NdJ("selectionChange",function(t){e.CHM(n);const o=e.oxw();return e.KtG(o.indicatorPaletteChanged(t))}),e.qZA(),e.TgZ(6,"app-sma-list",17),e.NdJ("changed",function(t){e.CHM(n);const o=e.oxw();return e.KtG(o.indicatorsChanged(t))}),e.qZA()()}if(2&i){const n=e.oxw();e.xp6(5),e.Q6J("selected",n.selectedIndex)("colors",n.palettes)("label","Palette"),e.xp6(1),e.Q6J("initial",n.initialIndicators)("colors",n.selectedPalette)}}function I(i,r){if(1&i&&(e.TgZ(0,"span")(1,"a",18),e._uU(2),e.qZA()()),2&i){const n=e.oxw();e.xp6(1),e.s9C("href",n.dataSelection.url,e.LSH),e.xp6(1),e.Oqu(n.dataSelection.urlName)}}function z(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"mat-expansion-panel",15)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),e._uU(4,"tune"),e.qZA()()(),e.TgZ(5,"mat-form-field",19)(6,"mat-label"),e._uU(7,"Max period to display"),e.qZA(),e.TgZ(8,"input",20),e.NdJ("ngModelChange",function(t){e.CHM(n);const o=e.oxw();return e.KtG(o.maxPeriod=t)}),e.qZA()(),e.TgZ(9,"mat-form-field",19)(10,"mat-label"),e._uU(11,"Height"),e.qZA(),e.TgZ(12,"input",21),e.NdJ("ngModelChange",function(t){e.CHM(n);const o=e.oxw();return e.KtG(o.freqsH=t)}),e.qZA()(),e.TgZ(13,"app-sma-list",22),e.NdJ("changed",function(t){e.CHM(n);const o=e.oxw();return e.KtG(o.freqsChanged(t))}),e.qZA()()}if(2&i){const n=e.oxw();e.xp6(8),e.Q6J("ngModel",n.maxPeriod),e.xp6(4),e.Q6J("ngModel",n.freqsH),e.xp6(1),e.Q6J("initial",n.initialFreqs)}}const p=function(i,r,n){return[i,r,n]},u=4096,E=(i,r,n)=>{const a=[],t=(0,s.HMQ)(n);for(const o of i)a.push({time:o.time,value:r.update(t(o))});return a},K=(i,r,n)=>{const a=(0,s.HMQ)(n),t=a(i[0]);for(;!r.isPrimed;)r.update(t);const o=[];for(const m of i)o.push({time:m.time,value:r.update(a(m))});return o},B=[{path:"",component:(()=>{var i;class r{constructor(){this.indicators=[],this.initialized=!1,this.selectedIndex=0,this.initialIndicators={length:[5,10,20],barComponent:s.R2K.Median,showStyle:!0},this.initialFreqs={length:[5,10,20],showStyle:!1},this.palettes=(0,s.$rL)(this.initialIndicators.length.length),this.selectedPalette=this.palettes[this.selectedIndex],this.smaNote=w.Et,this.froaiNote=w.rI,this.freqs=[],this.freqsMaxPeriod=40,this.freqsHeight=300,this.unlocked=!0,this.dataStepUp=(0,s.TYA)(10,32,90,96,1),this.dataStepDn=(0,s.TYA)(90,32,10,96,1),this.sma2=s.Z7F.calculate(u,new s.pDQ({length:2}),4),this.sma3=s.Z7F.calculate(u,new s.pDQ({length:3}),6),this.sma4=s.Z7F.calculate(u,new s.pDQ({length:4}),8,44),this.sma5=s.Z7F.calculate(u,new s.pDQ({length:5}),10),this.sma6=s.Z7F.calculate(u,new s.pDQ({length:6}),12),this.sma7=s.Z7F.calculate(u,new s.pDQ({length:7}),14),this.sma10=s.Z7F.calculate(u,new s.pDQ({length:10}),20),this.sma20=s.Z7F.calculate(u,new s.pDQ({length:20}),40,13)}get maxPeriod(){return this.freqsMaxPeriod}set maxPeriod(a){(!a||a<2)&&(a=2),this.freqsMaxPeriod=a,this.freqs.length>0&&(this.freqs=[...this.freqs])}get freqsH(){return this.freqsHeight}set freqsH(a){this.freqsHeight=a,this.freqs.length>0&&(this.freqs=[...this.freqs])}get unLocked(){return this.unlocked}set unLocked(a){this.unlocked=a,this.render()}ngAfterViewInit(){this.initialized=!0,this.unlocked=!1,this.render()}indicatorPaletteChanged(a){this.selectedIndex=this.palettes.indexOf(a),this.selectedPalette=a}indicatorsChanged(a){const t=a.length>2?a.length:2;t!==this.selectedPalette.length&&(this.palettes=(0,s.$rL)(t),this.selectedIndex>=t&&(this.selectedIndex=0),this.selectedPalette=this.palettes[this.selectedIndex]),this.indicators=a,this.render()}freqsChanged(a){const t=[];for(const o of a){const m=o.params.length,c=s.Z7F.calculate(u,new s.pDQ({length:m}),2*m,43);t.push(c)}this.freqs=t}dataSelectionChanged(a){this.dataSelection=a,this.render()}render(){this.initialized&&(this.configuration=this.prepareConfig(this.dataSelection.mnemonic,this.dataSelection.data,!1),this.configurationStepUp=this.prepareConfig("",this.dataStepUp,!0),this.configurationStepDn=this.prepareConfig("",this.dataStepDn,!0))}prepareConfig(a,t,o){const m={width:"100%",widthMin:360,navigationPane:{height:30,heightMin:30,heightMax:30,hasLine:!1,hasArea:!0,hasTimeAxis:!1,timeTicks:0},heightNavigationPane:30,timeAnnotationFormat:"%Y-%m-%d",axisLeft:!0,axisRight:!1,margin:{left:0,top:10,right:20,bottom:0},ohlcv:{name:"",data:[],candlesticks:!1},pricePane:{height:"30%",heightMin:300,heightMax:800,valueMarginPercentageFactor:.01,valueFormat:",.2f",bands:[],lineAreas:[],horizontals:[],arrows:[],lines:[]},indicatorPanes:[],crosshair:!1,volumeInPricePane:!1,menuVisible:!0,downloadSvgVisible:!0};m.menuVisible=this.unlocked,m.ohlcv.name=a,m.ohlcv.data=t;for(const c of this.indicators){const M=c.params.barComponent?c.params.barComponent:s.R2K.Close,b=new s.pDQ(c.params),h=new s.ha4;h.name=b.getMnemonic(),h.data=o?K(t,b,M):E(t,b,M);const q=c.style;h.color=q.color,h.width=q.width,h.dash=q.dash,h.interpolation=q.interpolation,m.pricePane.lines.push(h)}return m}}return(i=r).\u0275fac=function(a){return new(a||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-ind-sma"]],decls:356,vars:202,consts:[[1,"slide-toggle",3,"color","ngModel","ngModelChange"],[1,"icon"],["label","",3,"selectionChange"],[1,"figwide"],[1,"ohlcv-chart-study",3,"configuration"],["expanded","false","style","margin-bottom: 1em;",4,"ngIf"],[4,"ngIf"],[2,"width","100%"],[3,"href"],[3,"subfig","width","height","ymode","xmode","maxPeriod","data","settingsPanelVisible"],[3,"subfig","width","height","ymode","xmode","data","settingsPanelVisible"],[1,"counter-skip"],["href","https://books.google.com/books?id=JokQD5nK4LMC","target","_blank"],["href","https://books.google.com/books?id=q9Q6EAAAQBAJ","target","_blank"],["href","https://books.google.com/books?id=EaMuAAAAQBAJ","target","_blank"],["expanded","false",2,"margin-bottom","1em"],[2,"vertical-align","bottom",3,"selected","colors","label","selectionChange"],[3,"initial","colors","changed"],["target","_blank",3,"href"],["appearance","fill"],["matInput","","type","number","min","8","max","1024","step","1",3,"ngModel","ngModelChange"],["matInput","","type","number","min","100","max","1024","step","1",3,"ngModel","ngModelChange"],[3,"initial","changed"]],template:function(a,t){1&a&&(e.TgZ(0,"h1"),e._uU(1),e.qZA(),e.TgZ(2,"mat-slide-toggle",0),e.NdJ("ngModelChange",function(m){return t.unLocked=m}),e.TgZ(3,"mat-icon",1),e._uU(4,"tune"),e.qZA()(),e.TgZ(5,"app-bar-series-select",2),e.NdJ("selectionChange",function(m){return t.dataSelectionChanged(m)}),e.qZA(),e.TgZ(6,"figure",3),e._UZ(7,"mb-ohlcv-chart",4),e.YNc(8,N,7,5,"mat-expansion-panel",5),e.TgZ(9,"figcaption"),e._uU(10),e.YNc(11,I,3,2,"span",6),e.qZA()(),e._UZ(12,"p"),e.TgZ(13,"div",7),e._uU(14," A Simple Moving Average (SMA) of length "),e.TgZ(15,"mb-ki"),e._uU(16,"L \\ge 2"),e.qZA(),e._uU(17," is the arithmetic mean of the last "),e.TgZ(18,"mb-ki"),e._uU(19,"L"),e.qZA(),e._uU(20," observations of a series "),e.TgZ(21,"mb-ki"),e._uU(22),e.qZA(),e._uU(23,", where "),e.TgZ(24,"mb-ki"),e._uU(25),e.qZA(),e._uU(26," is the most recent value and "),e.TgZ(27,"mb-ki"),e._uU(28,"k \\ge L"),e.qZA(),e._uU(29,": "),e.TgZ(30,"mb-kd"),e._uU(31),e.qZA(),e._uU(32," When a next sample "),e.TgZ(33,"mb-ki"),e._uU(34),e.qZA(),e._uU(35," arrives, it will be added to the sum, and the "),e.TgZ(36,"mb-ki"),e._uU(37),e.qZA(),e._uU(38," sample will be dropped from the sum. Thus, the window of "),e.TgZ(39,"mb-ki"),e._uU(40,"L"),e.qZA(),e._uU(41,' samples "moves", which explains the "moving average" in its name. '),e._UZ(42,"p"),e._uU(43," When "),e.TgZ(44,"mb-ki"),e._uU(45,"k \\lt L"),e.qZA(),e._uU(46,", the equation (1) transforms into a cumulative moving average: "),e.TgZ(47,"mb-kd"),e._uU(48),e.qZA(),e._uU(49," Since the effective length "),e.TgZ(50,"mb-ki"),e._uU(51,"k \\lt L"),e.qZA(),e._uU(52,', we consider SMA values undefined in this case. A scientific way to say this is "an indicator is not primed". So, the SMA is not primed during the first '),e.TgZ(53,"mb-ki"),e._uU(54),e.qZA(),e._uU(55," updates. "),e._UZ(56,"p"),e._uU(57," The equation (1) can be rewritten in the recurrent form (the "),e.TgZ(58,"mb-ki"),e._uU(59),e.qZA(),e._uU(60," is taken out of the summation, the "),e.TgZ(61,"mb-ki"),e._uU(62),e.qZA(),e._uU(63," is added and subtracted), which gives an efficient method of SMA calculation: "),e.TgZ(64,"mb-kd"),e._uU(65),e.qZA(),e.TgZ(66,"mb-kd"),e._uU(67),e.qZA(),e._UZ(68,"p"),e._uU(69," From the digital signal processing (DSP) point of view, SMA is a finite impulse response (FIR) filter with all "),e.TgZ(70,"mb-ki"),e._uU(71),e.qZA(),e._uU(72," weight coefficients equal: "),e.TgZ(73,"mb-kd"),e._uU(74),e.qZA(),e._uU(75," The filter is finite because only a finite number of "),e.TgZ(76,"mb-ki"),e._uU(77),e.qZA(),e._uU(78," last samples contribute to its value. "),e._UZ(79,"p"),e.qZA(),e.TgZ(80,"h2"),e._uU(81,"Step response"),e.qZA(),e.TgZ(82,"div",7),e._uU(83," Two figures below demonstrate the response of an SMA to the step-up and step-down data. The step transition is clearly linear. Both responses touch the step data with the lag equal to the length "),e.TgZ(84,"mb-ki"),e._uU(85),e.qZA(),e._uU(86," of the filter. The step-up response doesn't overshoot and the step-down response doesn't undershoot the data. "),e._UZ(87,"p"),e.qZA(),e.TgZ(88,"figure",3),e._UZ(89,"mb-ohlcv-chart",4),e.TgZ(90,"figcaption"),e._uU(91,"Step-up response."),e.qZA()(),e.TgZ(92,"figure",3),e._UZ(93,"mb-ohlcv-chart",4),e.TgZ(94,"figcaption"),e._uU(95,"Step-down response."),e.qZA()(),e._UZ(96,"p"),e.TgZ(97,"h2"),e._uU(98,"Frequency response"),e.qZA(),e.TgZ(99,"div",7),e._uU(100," The figures below show an amplitude and a phase lag of the unit sample response of the SMA as a function of a period of various signal frequencies. "),e._UZ(101,"p"),e._uU(102," A period is a duration of a cycle in samples. The smallest possible period of a cycle is "),e.TgZ(103,"mb-ki"),e._uU(104),e.qZA(),e._uU(105," samples. To understand this, imagine a cycle of a sinusoid which starts at zero, goes up and peaks at "),e.TgZ(106,"mb-ki"),e._uU(107),e.qZA(),e._uU(108,", continues down and bottoms at "),e.TgZ(109,"mb-ki"),e._uU(110),e.qZA(),e._uU(111,", and then returns back to zero. We need at least two samples (peak and through) to represent a cycle. See more details in the "),e.TgZ(112,"a",8),e._uU(113),e.qZA(),e._uU(114,". "),e._UZ(115,"p"),e._uU(116," The same charts can be represented as a function of a cycle's frequency. A period ("),e.TgZ(117,"mb-ki"),e._uU(118),e.qZA(),e._uU(119,") is an inverse of the cycle's frequency ("),e.TgZ(120,"mb-ki"),e._uU(121),e.qZA(),e._uU(122,"): "),e.TgZ(123,"mb-ki"),e._uU(124),e.qZA(),e._uU(125,". The smallest period "),e.TgZ(126,"mb-ki"),e._uU(127),e.qZA(),e._uU(128," corresponds to the Nyquist frequency "),e.TgZ(129,"mb-ki"),e._uU(130),e.qZA(),e._uU(131,"which is the highest frequency possible in a signal. Below we use the normalized frequency which has the value of "),e.TgZ(132,"mb-ki"),e._uU(133),e.qZA(),e._uU(134," at the Nyquist frequency. That is, "),e.TgZ(135,"mb-ki"),e._uU(136),e.qZA(),e._uU(137," corresponds to the infinite "),e.TgZ(138,"mb-ki"),e._uU(139),e.qZA(),e._uU(140,", "),e.TgZ(141,"mb-ki"),e._uU(142),e.qZA(),e._uU(143," corresponds to the "),e.TgZ(144,"mb-ki"),e._uU(145),e.qZA(),e._uU(146,". "),e._UZ(147,"p"),e.qZA(),e.TgZ(148,"figure",3),e._UZ(149,"mb-frequency-response-chart",9)(150,"mb-frequency-response-chart",9),e.YNc(151,z,14,3,"mat-expansion-panel",5),e.TgZ(152,"figcaption"),e._uU(153,"An amplitude (a) and a phase lag (b) as a function of a cycle."),e.qZA()(),e._UZ(154,"p"),e.TgZ(155,"div",7),e._uU(156," The shape of the amplitude response is different for the even and odd values of "),e.TgZ(157,"mb-ki"),e._uU(158),e.qZA(),e._uU(159,". For the even values of "),e.TgZ(160,"mb-ki"),e._uU(161),e.qZA(),e._uU(162,", the amplitude decreases to zero for smallest period "),e.TgZ(163,"mb-ki"),e._uU(164),e.qZA(),e._uU(165,". For the odd values of "),e.TgZ(166,"mb-ki"),e._uU(167),e.qZA(),e._uU(168,", it stays above zero. "),e._UZ(169,"p"),e._uU(170," The shape of the unwrapped frequency response is linear with respect to a normalized frequency, and is hyperbolic with respect to a period. "),e._UZ(171,"p"),e._uU(172," This is illusrated in figures below both for the period (in samples) and the normalized frequency. "),e._UZ(173,"p"),e.qZA(),e.TgZ(174,"figure",3),e._UZ(175,"mb-frequency-response-chart",9)(176,"mb-frequency-response-chart",9),e.TgZ(177,"figcaption"),e._uU(178,"An amplitude as a function of a period of a cycle for even (a) and odd (b) SMA length."),e.qZA()(),e.TgZ(179,"figure",3),e._UZ(180,"mb-frequency-response-chart",10)(181,"mb-frequency-response-chart",10),e.TgZ(182,"figcaption"),e._uU(183,"An amplitude as a function of a normalized frequency of a cycle for even (a) and odd (b) SMA length."),e.qZA()(),e.TgZ(184,"figure",3),e._UZ(185,"mb-frequency-response-chart",9)(186,"mb-frequency-response-chart",9),e.TgZ(187,"figcaption"),e._uU(188,"A phase as a function of a period of a wave for even (a) and odd (b) SMA length."),e.qZA()(),e.TgZ(189,"figure",3),e._UZ(190,"mb-frequency-response-chart",10)(191,"mb-frequency-response-chart",10),e.TgZ(192,"figcaption"),e._uU(193,"A phase as a function of a normalized frequency of a wave for even (a) and odd (b) SMA length."),e.qZA()(),e._UZ(194,"p"),e.TgZ(195,"div",7),e._uU(196," The frequency response of an SMA can be derived analytically (Mak, 2021). "),e._UZ(197,"p"),e._uU(198," The frequency response function of a discrete-time linear time-invariant (DTLTI) system is the discrete-time Fourier transform (DTFT) of the unit impulse response "),e.TgZ(199,"mb-ki"),e._uU(200),e.qZA(),e._uU(201," (Oppenheim et al., 2009): "),e.TgZ(202,"mb-kd"),e._uU(203),e.qZA(),e._uU(204," where "),e.TgZ(205,"mb-ki"),e._uU(206),e.qZA(),e._uU(207," is an angular frequency (in radians per sample), "),e.TgZ(208,"mb-ki"),e._uU(209),e.qZA(),e._uU(210," is a frequency, and "),e.TgZ(211,"mb-ki"),e._uU(212),e.qZA(),e._uU(213," is a period of a cycle in samples: "),e.TgZ(214,"mb-kd"),e._uU(215),e.qZA(),e._uU(216," The unit impulse response is the output of the SMA when a Kronecker delta function "),e.TgZ(217,"mb-kd"),e._uU(218),e.qZA(),e._uU(219," is applied to the input. Since SMA has equal weight coefficients, the unit impulse response can be obtained from equation (3): "),e.TgZ(220,"mb-kd"),e._uU(221),e.qZA(),e.TgZ(222,"mb-kd"),e._uU(223),e.qZA(),e.TgZ(224,"mb-kd"),e._uU(225),e.qZA(),e._uU(226," Substituting (5) into equation (4) and reducing to the finite sum gives "),e.TgZ(227,"mb-kd"),e._uU(228),e.qZA(),e.TgZ(229,"mb-kd"),e._uU(230),e.qZA(),e._uU(231," To simplify (6), we can recall a sum of geometric series "),e.TgZ(232,"mb-kd"),e._uU(233),e.qZA(),e._uU(234," Multiplying both sides by "),e.TgZ(235,"mb-ki"),e._uU(236),e.qZA(),e._uU(237," and simplifying "),e.TgZ(238,"mb-kd"),e._uU(239),e.qZA(),e.TgZ(240,"mb-kd"),e._uU(241),e.qZA(),e.TgZ(242,"mb-kd"),e._uU(243),e.qZA(),e._uU(244," gives a well-known identity for a sum of geometric series (Jeffrey and Dai, 2008, 1.2.2.2): "),e.TgZ(245,"mb-kd"),e._uU(246),e.qZA(),e._uU(247," Now we can write the frequency response function as "),e.TgZ(248,"mb-kd"),e._uU(249),e.qZA(),e._uU(250," where we have let "),e.TgZ(251,"mb-ki"),e._uU(252),e.qZA(),e._uU(253,". At "),e.TgZ(254,"mb-ki"),e._uU(255),e.qZA(),e._uU(256," equation (7) is indeterminate, but we can use the De l'H\xf4pital's rule (Jeffrey and Dai, 2008, 1.15.1) "),e.TgZ(257,"mb-kd"),e._uU(258),e.qZA(),e._uU(259," to show that "),e.TgZ(260,"mb-kd"),e._uU(261),e.qZA(),e.TgZ(262,"mb-kd"),e._uU(263),e.qZA(),e.TgZ(264,"mb-kd"),e._uU(265),e.qZA(),e._uU(266," The frequency response "),e.TgZ(267,"mb-ki"),e._uU(268),e.qZA(),e._uU(269," is zero when "),e.TgZ(270,"mb-kd"),e._uU(271),e.qZA(),e.TgZ(272,"mb-kd"),e._uU(273),e.qZA(),e.TgZ(274,"mb-kd"),e._uU(275),e.qZA(),e._uU(276," Thus, "),e.TgZ(277,"mb-ki"),e._uU(278),e.qZA(),e._uU(279," is zero at cycle periods "),e.TgZ(280,"mb-kd"),e._uU(281),e.qZA(),e._uU(282," Now let's recall the well nown formula for "),e.TgZ(283,"mb-ki"),e._uU(284),e.qZA(),e._uU(285,": "),e.TgZ(286,"mb-kd"),e._uU(287),e.qZA(),e.TgZ(288,"mb-kd"),e._uU(289),e.qZA(),e.TgZ(290,"mb-kd"),e._uU(291),e.qZA(),e.TgZ(292,"mb-kd"),e._uU(293),e.qZA(),e._uU(294," Equipped with this, we can transform equation (7) into: "),e.TgZ(295,"mb-kd"),e._uU(296),e.qZA(),e.TgZ(297,"mb-kd"),e._uU(298),e.qZA(),e.TgZ(299,"mb-kd"),e._uU(300),e.qZA(),e.TgZ(301,"mb-kd"),e._uU(302),e.qZA(),e._uU(303," The magnitude of the frequency response is the modulus of "),e.TgZ(304,"mb-ki"),e._uU(305),e.qZA(),e._uU(306,": "),e.TgZ(307,"mb-kd"),e._uU(308),e.qZA(),e.TgZ(309,"mb-kd"),e._uU(310),e.qZA(),e._uU(311," Here "),e.TgZ(312,"mb-ki"),e._uU(313),e.qZA(),e._uU(314," is an angular frequency in radians per sample. In terms of cycle period (recall "),e.TgZ(315,"mb-ki"),e._uU(316),e.qZA(),e._uU(317,") this will be: "),e.TgZ(318,"mb-kd"),e._uU(319),e.qZA(),e._uU(320," The phase (in radians) of the frequency response is the complex argument of the exponent in equation (9): "),e.TgZ(321,"mb-kd"),e._uU(322),e.qZA(),e.TgZ(323,"mb-kd"),e._uU(324),e.qZA(),e._uU(325," And, finally, the number of samples lagging behind the signal is independent of angular frequency "),e.TgZ(326,"mb-ki"),e._uU(327),e.qZA(),e._uU(328,": "),e.TgZ(329,"mb-kd"),e._uU(330),e.qZA(),e._UZ(331,"p"),e.qZA(),e._UZ(332,"hr"),e.TgZ(333,"h2",11),e._uU(334,"References"),e.qZA(),e.TgZ(335,"div"),e._uU(336," Jeffrey, A., & Dai, H. H. (2008). "),e.TgZ(337,"em"),e._uU(338,"Handbook of mathematical formulas and integrals"),e.qZA(),e._uU(339,". (4th ed., p. 592). San Diego, CA: Elsevier/Academic Press. "),e.TgZ(340,"a",12),e._uU(341,"google books"),e.qZA()(),e.TgZ(342,"div"),e._uU(343,"Mak, D. K. (2021). "),e.TgZ(344,"em"),e._uU(345,"Trading Tactics in the Financial Market: Mathematical Methods to Improve Performance"),e.qZA(),e._uU(346," (p. ix+269). doi:10.1007/978-3-030-70622-7 "),e.TgZ(347,"a",13),e._uU(348,"google books"),e.qZA()(),e.TgZ(349,"div"),e._uU(350,"Oppenheim, A. V., Schafer, R. W., Yoder, M. A., & Padgett, W. T. (2009). "),e.TgZ(351,"em"),e._uU(352,"Discrete-time signal processing"),e.qZA(),e._uU(353,". (3rd ed., p. 1120). Upper Saddle River, NJ: Pearson. "),e.TgZ(354,"a",14),e._uU(355,"google books"),e.qZA()()),2&a&&(e.xp6(1),e.Oqu(t.smaNote.title),e.xp6(1),e.Q6J("color","primary")("ngModel",t.unLocked),e.xp6(5),e.Q6J("configuration",t.configuration),e.xp6(1),e.Q6J("ngIf",t.unlocked),e.xp6(2),e.hij("",t.dataSelection.description,". "),e.xp6(1),e.Q6J("ngIf",t.dataSelection.url),e.xp6(11),e.Oqu("x_{1},\\, x_{2},\\, x_{3},\\,\\ldots\\,,\\, x_{k}"),e.xp6(3),e.Oqu("x_{k}"),e.xp6(6),e.Oqu("\\tag*{(1)}sma_{k}=\\frac{1}{L}\\sum_{m=1}^{L}x_{k-L+m}"),e.xp6(3),e.Oqu("x_{k+1}"),e.xp6(3),e.Oqu("x_{k-L}"),e.xp6(11),e.Oqu("\\tag*{}sma_{k}=\\frac{1}{k}\\sum_{m=1}^{k}x_{m}"),e.xp6(6),e.Oqu("L-1"),e.xp6(5),e.Oqu("x_{k}"),e.xp6(3),e.Oqu("x_{k-L}"),e.xp6(3),e.hij(" ","\\tag*{}sma_{k}=\\frac{1}{L}\\left[x_{k}+\\sum_{m=k-L}^{k-1}x_{m}-x_{k-L}\\right]"," "),e.xp6(2),e.hij(" ","\\tag*{(2)}=sma_{k-1}+\\frac{x_{k}-x_{k-L}}{L}"," "),e.xp6(4),e.Oqu("L"),e.xp6(3),e.hij(" ","\\tag*{(3)}sma_{k}=\\sum_{m=1}^{L}w_{m}x_{k-m+1},\\ k\\ge L,\\ \\forall m\\ w_{m}=\\frac{1}{L}"," "),e.xp6(3),e.Oqu("L"),e.xp6(8),e.Oqu("L"),e.xp6(4),e.Q6J("configuration",t.configurationStepUp),e.xp6(4),e.Q6J("configuration",t.configurationStepDn),e.xp6(11),e.Oqu("2"),e.xp6(3),e.Oqu("1"),e.xp6(3),e.Oqu("-1"),e.xp6(2),e.MGl("href","/",t.froaiNote.route,"",e.LSH),e.xp6(1),e.Oqu(t.froaiNote.title),e.xp6(5),e.Oqu("\\tau"),e.xp6(3),e.Oqu("\\nu"),e.xp6(3),e.Oqu("\\tau = \\frac{1}{\\nu}"),e.xp6(3),e.Oqu("\\tau = 2"),e.xp6(3),e.Oqu("\\nu = \\frac{1}{\\tau} = \\frac{1}{2}"),e.xp6(3),e.Oqu("1"),e.xp6(3),e.Oqu("0"),e.xp6(3),e.Oqu("\\tau"),e.xp6(3),e.Oqu("1"),e.xp6(3),e.Oqu("\\tau = 2"),e.xp6(4),e.Q6J("subfig","(a)")("width","100%")("height",t.freqsH)("ymode","amplitudePct")("xmode","frequency")("maxPeriod",t.maxPeriod)("data",t.freqs)("settingsPanelVisible",t.unlocked),e.xp6(1),e.Q6J("subfig","(b)")("width","100%")("height",t.freqsH)("ymode","phaseDegUnwrapped")("xmode","frequency")("maxPeriod",t.maxPeriod)("data",t.freqs)("settingsPanelVisible",t.unlocked),e.xp6(1),e.Q6J("ngIf",t.unlocked),e.xp6(7),e.Oqu("L"),e.xp6(3),e.Oqu("L"),e.xp6(3),e.Oqu("\\tau = 2"),e.xp6(3),e.Oqu("L"),e.xp6(8),e.Q6J("subfig","(a)")("width","100%")("height",200)("ymode","amplitudePct")("xmode","period")("maxPeriod",40)("data",e.kEZ(170,p,t.sma2,t.sma4,t.sma6))("settingsPanelVisible",t.unlocked),e.xp6(1),e.Q6J("subfig","(b)")("width","100%")("height",200)("ymode","amplitudePct")("xmode","period")("maxPeriod",40)("data",e.kEZ(174,p,t.sma3,t.sma5,t.sma7))("settingsPanelVisible",t.unlocked),e.xp6(4),e.Q6J("subfig","(a)")("width","100%")("height",200)("ymode","amplitudePct")("xmode","frequency")("data",e.kEZ(178,p,t.sma2,t.sma4,t.sma6))("settingsPanelVisible",t.unlocked),e.xp6(1),e.Q6J("subfig","(b)")("width","100%")("height",200)("ymode","amplitudePct")("xmode","frequency")("data",e.kEZ(182,p,t.sma3,t.sma5,t.sma7))("settingsPanelVisible",t.unlocked),e.xp6(4),e.Q6J("subfig","(a)")("width","100%")("height",200)("ymode","phaseDegUnwrapped")("xmode","period")("maxPeriod",40)("data",e.kEZ(186,p,t.sma2,t.sma4,t.sma6))("settingsPanelVisible",t.unlocked),e.xp6(1),e.Q6J("subfig","(b)")("width","100%")("height",200)("ymode","phaseDegUnwrapped")("xmode","period")("maxPeriod",40)("data",e.kEZ(190,p,t.sma3,t.sma5,t.sma7))("settingsPanelVisible",t.unlocked),e.xp6(4),e.Q6J("subfig","(a)")("width","100%")("height",200)("ymode","phaseDegUnwrapped")("xmode","frequency")("data",e.kEZ(194,p,t.sma2,t.sma4,t.sma6))("settingsPanelVisible",t.unlocked),e.xp6(1),e.Q6J("subfig","(b)")("width","100%")("height",200)("ymode","phaseDegUnwrapped")("xmode","frequency")("data",e.kEZ(198,p,t.sma3,t.sma5,t.sma7))("settingsPanelVisible",t.unlocked),e.xp6(9),e.Oqu("h(k)"),e.xp6(3),e.hij(" ","\\tag*{(4)}H(\\omega)=\\sum_{k=-\\infty}^{\\infty}h(k)\\exp(-i k \\omega)"," "),e.xp6(3),e.Oqu("\\omega"),e.xp6(3),e.Oqu("\\nu"),e.xp6(3),e.Oqu("\\tau"),e.xp6(3),e.hij(" ","\\tag*{}\\omega = 2\\pi\\nu = \\frac{2\\pi}{\\tau}"," "),e.xp6(3),e.hij(" ","\\tag*{}\\delta[k] = \\begin{cases} 1, & k=0 \\\\ 0, & k \\neq 0 \\end{cases}"," "),e.xp6(3),e.hij(" ","\\tag*{}h(k)=\\sum_{m=0}^{L-1}w_m\\delta[k-m]"," "),e.xp6(2),e.hij(" ","\\tag*{}=\\frac{1}{l}\\sum_{m=0}^{L-1}\\delta[k-m]"," "),e.xp6(2),e.hij(" ","\\tag*{(5)}=\\begin{cases} 1/L, & 0 \\leq k \\lt L \\\\ 0, & \\text{otherwise} \\end{cases}"," "),e.xp6(3),e.hij(" ","\\tag*{}H(\\omega)=\\sum_{k=0}^{L-1}h(k)\\exp(-i k \\omega)"," "),e.xp6(2),e.hij(" ","\\tag*{(6)}=\\frac{1}{L}\\sum_{k=0}^{L-1}\\exp(-i k \\omega)"," "),e.xp6(3),e.hij(" ","\\tag*{}\\sum_{k=0}^{L-1}x^k = 1 + x + x^2 + \\ldots + x^{L-1}"," "),e.xp6(3),e.Oqu("1-x"),e.xp6(3),e.hij(" ","\\tag*{}(1-x)\\sum_{k=0}^{L-1}x^k = (1-x)(1 + x + x^2 + \\ldots + x^{L-1})"," "),e.xp6(2),e.hij(" ","\\tag*{}= 1 + x + x^2 + \\ldots + x^{L-1} - x - x^2 - \\ldots - x^{L-1} - x^L"," "),e.xp6(2),e.hij(" ","\\tag*{}= 1 - x^L"," "),e.xp6(3),e.hij(" ","\\tag*{}\\sum_{k=0}^{L-1}x^k = \\begin{cases} (1-x^L)/(1-x), & x \\neq 1 \\\\ L, & x = 1 \\end{cases}"," "),e.xp6(3),e.hij(" ","\\tag*{(7)}H(\\omega)=\\frac{1}{L}\\frac{1 - \\exp(-i\\omega L)}{1 - \\exp(-i \\omega)}"," "),e.xp6(3),e.Oqu("x = \\exp(-i \\omega)"),e.xp6(3),e.Oqu("\\omega = 0"),e.xp6(3),e.hij(" ","\\tag*{}\\lim_{x\\to x_0}{[\\frac{f(x)}{g(x)}]}=\\frac{f'(x_0)}{g'(x_0)}"," "),e.xp6(3),e.hij(" ","\\tag*{}\\lim_{\\omega\\to 0}{H(\\omega)}=\\frac{1}{L}\\lim_{\\omega\\to 0}{\\frac{1 - \\exp(-i\\omega L)}{1 - \\exp(-i \\omega)}}"," "),e.xp6(2),e.hij(" ","\\tag*{}\\overset{\\left[\\frac{0}{0}\\right]}{\\underset{\\mathrm{H}}{=}}\\ \\frac{1}{L}\\lim_{\\omega\\to 0}{\\frac{iL\\exp(-i\\omega L)}{i\\exp(-i \\omega)}}"," "),e.xp6(2),e.hij(" ","\\tag*{}=\\frac{1}{L}\\frac{iL}{i} = 1"," "),e.xp6(3),e.Oqu("H(\\omega)"),e.xp6(3),e.hij(" ","\\tag*{}\\exp(-i\\omega L)=\\cos(\\omega L) - i\\cdot\\sin{\\omega L} = 1"," "),e.xp6(2),e.hij(" ","\\tag*{}\\omega L=2\\pi m\\quad m=1,2,3,\\ldots"," "),e.xp6(2),e.hij(" ","\\tag*{}\\omega=\\frac{2\\pi m}{L}"," "),e.xp6(3),e.Oqu("H(\\omega)"),e.xp6(3),e.hij(" ","\\tag*{(8)}\\tau=\\frac{2\\pi}{\\omega}=\\frac{2\\pi L}{2\\pi m} = L/m,\\quad m=1,2,3,\\ldots"," "),e.xp6(3),e.Oqu("\\exp(i\\theta)-\\exp(-i\\theta)"),e.xp6(3),e.hij(" ","\\tag*{}\\exp(i\\theta)-\\exp(-i\\theta)"," "),e.xp6(2),e.hij(" ","\\tag*{}=\\cos(\\theta)+i\\cdot\\sin(\\theta)-\\cos(-\\theta)- i\\cdot\\sin(-\\theta)"," "),e.xp6(2),e.hij(" ","\\tag*{}=\\cos(\\theta)+i\\cdot\\sin(\\theta)-\\cos(\\theta)+i\\cdot\\sin(\\theta)"," "),e.xp6(2),e.hij(" ","\\tag*{}=2i\\cdot\\sin(\\theta)"," "),e.xp6(3),e.hij(" ","\\tag*{}H(\\omega)=\\frac{1}{L}\\frac{1 - \\exp(-i\\omega L)}{1 - \\exp(-i \\omega)}"," "),e.xp6(2),e.hij(" ","\\tag*{}=\\frac{1}{L}\\frac{\\exp(-i\\omega L/2)}{\\exp(-i\\omega/2)}\\frac{\\exp(i\\omega L/2) - \\exp(-i\\omega L/2)}{\\exp(i\\omega/2) - \\exp(-i\\omega/2)}"," "),e.xp6(2),e.hij(" ","\\tag*{}=\\frac{1}{l}\\frac{\\exp(-i\\omega L/2)}{\\exp(-i\\omega/2)}\\frac{2i\\sin(\\omega L/2)}{2i\\sin(\\omega /2)}"," "),e.xp6(2),e.hij(" ","\\tag*{(9)}=\\frac{\\exp(-i\\omega\\frac{L-1}{2})}{L}\\frac{\\sin(\\omega L/2)}{\\sin(\\omega /2)}"," "),e.xp6(3),e.Oqu("H(\\omega)"),e.xp6(3),e.hij(" ","\\tag*{}|H(\\omega)|=\\left|\\frac{\\exp(-i\\omega\\frac{L-1}{2})}{L}\\frac{\\sin(\\omega L/2)}{\\sin(\\omega /2)}\\right|"," "),e.xp6(2),e.hij(" ","\\tag*{(10)}=\\frac{1}{L}\\frac{|\\sin(\\omega L/2)|}{|\\sin(\\omega /2)|}"," "),e.xp6(3),e.Oqu("\\omega"),e.xp6(3),e.Oqu("\\omega=2\\pi/\\tau"),e.xp6(3),e.hij(" ","\\tag*{(11)}|H(\\tau)|=\\frac{1}{L}\\frac{|\\sin(\\pi L/\\tau)|}{|\\sin(\\pi /\\tau)|}"," "),e.xp6(3),e.hij(" ","\\tag*{(12)}\\phi(\\omega)=\\arg(H(\\omega))=-\\frac{L-1}{2}\\omega"," "),e.xp6(2),e.hij(" ","\\tag*{(13)}\\phi(\\tau)=-\\pi\\frac{L-1}{\\tau}"," "),e.xp6(3),e.Oqu("\\omega"),e.xp6(3),e.hij(" ","\\tag*{(14)}bar\\ lag=\\frac{\\phi(\\omega)}{\\omega}=-\\frac{L-1}{2}"," "))},dependencies:[d.O5,g.Fj,g.wV,g.JJ,g.qQ,g.Fd,g.On,U.KE,U.hX,T.Nt,f.Hw,_.ib,_.yz,_.yK,k.Rr,s.GJY,s.JJg,s.kDz,s.T1Q,J.h,s.y29,D],styles:[".ohlcv-chart-study[_ngcontent-%COMP%]{margin:0;padding:0}.button[_ngcontent-%COMP%]{margin-right:8px}.slide-toggle[_ngcontent-%COMP%]{float:right;margin:0 8px 0 0}.icon[_ngcontent-%COMP%]{vertical-align:bottom}"],changeDetection:0}),r})()},{path:"**",redirectTo:""}];let G=(()=>{var i;class r{}return(i=r).\u0275fac=function(a){return new(a||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[y.Bz.forChild(B),y.Bz]}),r})(),Y=(()=>{var i;class r{}return(i=r).\u0275fac=function(a){return new(a||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,g.u5,U.lN,T.c,x.ot,f.Ps,_.To,k.rP,P.N6,s.Fd9,s.hXN,s.ylR,s.U8i,s._km,s.Zfk,s.jkk,O.S,s.feT,G]}),r})()}}]);