"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[948],{948:(ee,k,m)=>{m.r(k),m.d(k,{EmaModule:()=>$});var c=m(6814),p=m(6223),x=m(9157),y=m(2032),U=m(2296),d=m(617),f=m(3305),v=m(2599),S=m(3176),o=m(3751),J=m(5501),C=m(1896),b=m(9383),e=m(5879),j=m(3367);function L(n,r){if(1&n){const i=e.EpF();e.TgZ(0,"mb-line-style-selector",3),e.NdJ("selectionChange",function(t){e.CHM(i);const s=e.oxw();return e.KtG(s.updateStyle(t))}),e.qZA()}if(2&n){const i=e.oxw();e.Q6J("initial",i.current.style)("label","Line")}}let z=(()=>{var n;class r{constructor(){this.removed=new e.vpe,this.changed=new e.vpe}set initial(a){this.current=a}updateStyle(a){this.current.style=a,this.changed.emit(this.current)}updateParams(a){this.current.params=a,this.changed.emit(this.current)}remove(){this.removed.emit(this.current)}}return(n=r).\u0275fac=function(a){return new(a||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-ema-params"]],inputs:{initial:"initial"},outputs:{removed:"removed",changed:"changed"},decls:6,vars:2,consts:[["mat-icon-button","","color","warn",3,"click"],[3,"initial","selectionChange"],[3,"initial","label","selectionChange",4,"ngIf"],[3,"initial","label","selectionChange"]],template:function(a,t){1&a&&(e.TgZ(0,"div")(1,"button",0),e.NdJ("click",function(){return t.remove()}),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()(),e.TgZ(4,"mb-exponential-moving-average-params",1),e.NdJ("selectionChange",function(l){return t.updateParams(l)}),e.qZA(),e.YNc(5,L,1,2,"mb-line-style-selector",2),e.qZA()),2&a&&(e.xp6(4),e.Q6J("initial",t.current.params),e.xp6(1),e.Q6J("ngIf",t.current.showStyle))},dependencies:[c.O5,U.RK,d.Hw,o.Mif,o.zoJ],changeDetection:0}),r})();function I(n,r){if(1&n){const i=e.EpF();e.TgZ(0,"app-ema-params",2),e.NdJ("changed",function(t){e.CHM(i);const s=e.oxw();return e.KtG(s.updated(t))})("removed",function(t){e.CHM(i);const s=e.oxw();return e.KtG(s.removed(t))}),e.qZA()}2&n&&e.Q6J("initial",r.$implicit)}const w=()=>{const n=new o.TD4;return n.color="",n.width=1.5,n.dash="",n.interpolation="camullRom",n},M=(n,r,i,a)=>({params:{length:r,firstIsAverage:i,barComponent:a},style:w(),showStyle:n}),F=(n,r,i)=>({params:{smoothingFactor:r,barComponent:i},style:w(),showStyle:n});let N=(()=>{var n;class r{constructor(){this.changed=new e.vpe,this.emaArray=[],this.colorArray=["#ff0000"],this.initialized=!1}set initialLength(a){const t=[];for(let s=0;s<a.length.length;s++){const l=M(a.showStyle,a.length[s],a.firstIsAverage,a.barComponent);l.style.color=this.colorArray[s%this.colorArray.length],t.push(l)}this.emaArray=t,this.defaultBarComponent=a.barComponent}set initialSmoothingFactor(a){const t=[];for(let s=0;s<a.smoothingFactor.length;s++){const l=F(a.showStyle,a.smoothingFactor[s],a.barComponent);l.style.color=this.colorArray[s%this.colorArray.length],t.push(l)}this.emaArray=t,this.defaultBarComponent=a.barComponent}set colors(a){if(a&&a.length>0){const t=[];this.colorArray=a;for(let s=0;s<this.emaArray.length;s++){const l={...this.emaArray[s]};l.style.color=a[s%a.length],t.push(l)}this.emaArray=t}}ngAfterViewInit(){this.initialized=!0,this.changed.emit(this.emaArray)}add(){const a=this.getShowStyle(),t=M(a,this.getLastLength()+5,!0,this.defaultBarComponent);a&&(t.style.color=this.colorArray[this.emaArray.length%this.colorArray.length]),this.emaArray.push(t),this.emaArray=[...this.emaArray],this.notify()}updated(a){this.getIndex(a)>=0&&this.notify()}removed(a){const t=this.getIndex(a);t>=0&&(this.emaArray.splice(t,1),this.emaArray=[...this.emaArray],this.notify())}getLastLength(){const a=this.emaArray.length-1;return a<0?0:(n=>"length"in n)(this.emaArray[a].params)?this.emaArray[a].params.length:Math.ceil(2/this.emaArray[a].params.smoothingFactor-1)}getShowStyle(){return!(this.emaArray.length<=0)&&this.emaArray[0].showStyle}getIndex(a){for(let t=0;t<this.emaArray.length;t++)if(this.emaArray[t]===a)return t;return-1}notify(){this.initialized&&this.changed.emit(this.emaArray)}}return(n=r).\u0275fac=function(a){return new(a||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-ema-list"]],inputs:{initialLength:"initialLength",initialSmoothingFactor:"initialSmoothingFactor",colors:"colors"},outputs:{changed:"changed"},decls:5,vars:1,consts:[[3,"initial","changed","removed",4,"ngFor","ngForOf"],["mat-mini-fab","","color","primary",3,"click"],[3,"initial","changed","removed"]],template:function(a,t){1&a&&(e.YNc(0,I,1,1,"app-ema-params",0),e.TgZ(1,"div")(2,"button",1),e.NdJ("click",function(){return t.add()}),e.TgZ(3,"mat-icon"),e._uU(4,"add"),e.qZA()()()),2&a&&e.Q6J("ngForOf",t.emaArray)},dependencies:[c.sg,U.nh,d.Hw,z]}),r})();function Q(n,r){if(1&n){const i=e.EpF();e.TgZ(0,"mat-expansion-panel",17)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),e._uU(4,"tune"),e.qZA()()(),e.TgZ(5,"mb-swatches-select",18),e.NdJ("selectionChange",function(t){e.CHM(i);const s=e.oxw();return e.KtG(s.indicatorPaletteChanged(t))}),e.qZA(),e.TgZ(6,"app-ema-list",19),e.NdJ("changed",function(t){e.CHM(i);const s=e.oxw();return e.KtG(s.indicatorsChanged(t))}),e.qZA()()}if(2&n){const i=e.oxw();e.xp6(5),e.Q6J("selected",i.selectedIndex)("colors",i.palettes)("label","Palette"),e.xp6(1),e.Q6J("initialLength",i.initialIndicators)("colors",i.selectedPalette)}}function D(n,r){if(1&n&&(e.TgZ(0,"span")(1,"a",20),e._uU(2),e.qZA()()),2&n){const i=e.oxw();e.xp6(1),e.s9C("href",i.dataSelection.url,e.LSH),e.xp6(1),e.Oqu(i.dataSelection.urlName)}}function Y(n,r){if(1&n){const i=e.EpF();e.TgZ(0,"mat-expansion-panel",17)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),e._uU(4,"tune"),e.qZA()()(),e.TgZ(5,"mat-form-field",21)(6,"mat-label"),e._uU(7,"Max period to display"),e.qZA(),e.TgZ(8,"input",22),e.NdJ("ngModelChange",function(t){e.CHM(i);const s=e.oxw();return e.KtG(s.maxPeriod=t)}),e.qZA()(),e.TgZ(9,"mat-form-field",21)(10,"mat-label"),e._uU(11,"Height"),e.qZA(),e.TgZ(12,"input",23),e.NdJ("ngModelChange",function(t){e.CHM(i);const s=e.oxw();return e.KtG(s.freqsH=t)}),e.qZA()(),e.TgZ(13,"app-ema-list",24),e.NdJ("changed",function(t){e.CHM(i);const s=e.oxw();return e.KtG(s.freqsChanged(t))}),e.qZA()()}if(2&n){const i=e.oxw();e.xp6(8),e.Q6J("ngModel",i.maxPeriod),e.xp6(4),e.Q6J("ngModel",i.freqsH),e.xp6(1),e.Q6J("initialLength",i.initialFreqs)}}const _=function(n,r,i,a){return[n,r,i,a]},g=4096,K=n=>"length"in n,B=(n,r,i)=>{const a=[],t=(0,o.HMQ)(i);for(const s of n)a.push({time:s.time,value:r.update(t(s))});return a},R=(n,r,i)=>{const a=(0,o.HMQ)(i),t=a(n[0]);for(;!r.isPrimed;)r.update(t);const s=[];for(const l of n)s.push({time:l.time,value:r.update(a(l))});return s},X=[{path:"",component:(()=>{var n;class r{constructor(){this.indicators=[],this.initialized=!1,this.selectedIndex=0,this.initialIndicators={length:[5,10,20],firstIsAverage:!1,barComponent:o.R2K.Median,showStyle:!0},this.initialFreqs={length:[5,10,20],firstIsAverage:!1,showStyle:!1},this.palettes=(0,o.$rL)(this.initialIndicators.length.length),this.selectedPalette=this.palettes[this.selectedIndex],this.smaNote=b.Et,this.emaNote=b.j,this.froaiNote=b.rI,this.freqs=[],this.freqsMaxPeriod=40,this.freqsHeight=300,this.unlocked=!0,this.dataStepUp=(0,o.TYA)(10,32,90,96,1),this.dataStepDn=(0,o.TYA)(90,32,10,96,1),this.ema2=o.Z7F.calculate(g,new o.Tkx({length:2,firstIsAverage:!1}),4),this.ema5=o.Z7F.calculate(g,new o.Tkx({length:5,firstIsAverage:!1}),10),this.ema10=o.Z7F.calculate(g,new o.Tkx({length:10,firstIsAverage:!1}),20),this.ema20=o.Z7F.calculate(g,new o.Tkx({length:20,firstIsAverage:!1}),40)}get maxPeriod(){return this.freqsMaxPeriod}set maxPeriod(a){(!a||a<2)&&(a=2),this.freqsMaxPeriod=a,this.freqs.length>0&&(this.freqs=[...this.freqs])}get freqsH(){return this.freqsHeight}set freqsH(a){this.freqsHeight=a,this.freqs.length>0&&(this.freqs=[...this.freqs])}get unLocked(){return this.unlocked}set unLocked(a){this.unlocked=a,this.render()}ngAfterViewInit(){this.initialized=!0,this.unlocked=!1,this.render()}indicatorPaletteChanged(a){this.selectedIndex=this.palettes.indexOf(a),this.selectedPalette=a}indicatorsChanged(a){const t=a.length>2?a.length:2;t!==this.selectedPalette.length&&(this.palettes=(0,o.$rL)(t),this.selectedIndex>=t&&(this.selectedIndex=0),this.selectedPalette=this.palettes[this.selectedIndex]),this.indicators=a,this.render()}freqsChanged(a){const t=[];for(const s of a)if(K(s.params)){const l=s.params,h=o.Z7F.calculate(g,new o.Tkx({length:l.length,firstIsAverage:l.firstIsAverage}),2*l.length);t.push(h)}else{const l=s.params,h=Math.ceil(2/l.smoothingFactor-1),q=o.Z7F.calculate(g,new o.Tkx({smoothingFactor:l.smoothingFactor}),2*h);t.push(q)}this.freqs=t}dataSelectionChanged(a){this.dataSelection=a,this.render()}render(){this.initialized&&(this.configuration=this.prepareConfig(this.dataSelection.mnemonic,this.dataSelection.data,!1),this.configurationStepUp=this.prepareConfig("",this.dataStepUp,!0),this.configurationStepDn=this.prepareConfig("",this.dataStepDn,!0))}prepareConfig(a,t,s){const l={width:"100%",widthMin:360,navigationPane:{height:30,heightMin:30,heightMax:30,hasLine:!1,hasArea:!0,hasTimeAxis:!1,timeTicks:0},heightNavigationPane:30,timeAnnotationFormat:"%Y-%m-%d",axisLeft:!0,axisRight:!1,margin:{left:0,top:10,right:20,bottom:0},ohlcv:{name:"",data:[],candlesticks:!1},pricePane:{height:"30%",heightMin:300,heightMax:800,valueMarginPercentageFactor:.01,valueFormat:",.2f",bands:[],lineAreas:[],horizontals:[],arrows:[],lines:[]},indicatorPanes:[],crosshair:!1,volumeInPricePane:!1,menuVisible:!0,downloadSvgVisible:!0};l.menuVisible=this.unlocked,l.ohlcv.name=a,l.ohlcv.data=t;for(const h of this.indicators){const q=h.params.barComponent?h.params.barComponent:o.R2K.Close,T=new o.Tkx(h.params),u=new o.ha4;u.name=T.getMnemonic(),u.data=s?R(t,T,q):B(t,T,q);const A=h.style;u.color=A.color,u.width=A.width,u.dash=A.dash,u.interpolation=A.interpolation,l.pricePane.lines.push(u)}return l}}return(n=r).\u0275fac=function(a){return new(a||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-ind-ema"]],decls:317,vars:164,consts:[[1,"slide-toggle",3,"color","ngModel","ngModelChange"],[1,"icon"],["label","",3,"selectionChange"],[1,"figwide"],[1,"ohlcv-chart-study",3,"configuration"],["expanded","false","style","margin-bottom: 1em;",4,"ngIf"],[4,"ngIf"],[2,"width","100%"],[3,"href"],[3,"subfig","width","height","ymode","xmode","maxPeriod","data","settingsPanelVisible"],[3,"subfig","width","height","ymode","xmode","maxPeriod","minDeg","maxDeg","data","settingsPanelVisible"],[3,"subfig","width","height","ymode","xmode","data","settingsPanelVisible"],[3,"subfig","width","height","ymode","xmode","minDeg","maxDeg","data","settingsPanelVisible"],[1,"counter-skip"],["href","https://books.google.com/books?id=JokQD5nK4LMC","target","_blank"],["href","https://books.google.com/books?id=18fICgAAQBAJ","target","_blank"],["href","https://books.google.com/books?id=EaMuAAAAQBAJ","target","_blank"],["expanded","false",2,"margin-bottom","1em"],[2,"vertical-align","bottom",3,"selected","colors","label","selectionChange"],[3,"initialLength","colors","changed"],["target","_blank",3,"href"],["appearance","fill"],["matInput","","type","number","min","8","max","1024","step","1",3,"ngModel","ngModelChange"],["matInput","","type","number","min","100","max","1024","step","1",3,"ngModel","ngModelChange"],[3,"initialLength","changed"]],template:function(a,t){1&a&&(e.TgZ(0,"h1"),e._uU(1),e.qZA(),e.TgZ(2,"mat-slide-toggle",0),e.NdJ("ngModelChange",function(l){return t.unLocked=l}),e.TgZ(3,"mat-icon",1),e._uU(4,"tune"),e.qZA()(),e.TgZ(5,"app-bar-series-select",2),e.NdJ("selectionChange",function(l){return t.dataSelectionChanged(l)}),e.qZA(),e.TgZ(6,"figure",3),e._UZ(7,"mb-ohlcv-chart",4),e.YNc(8,Q,7,5,"mat-expansion-panel",5),e.TgZ(9,"figcaption"),e._uU(10),e.YNc(11,D,3,2,"span",6),e.qZA()(),e._UZ(12,"p"),e.TgZ(13,"div",7),e._uU(14," An Exponential Moving Average (EMA), or Exponentially Weighted Moving Average (EWMA) in academic parlance, is defined recursively as "),e.TgZ(15,"mb-kd"),e._uU(16),e.qZA(),e._uU(17," The parameter "),e.TgZ(18,"mb-ki"),e._uU(19),e.qZA(),e._uU(20,", "),e.TgZ(21,"mb-ki"),e._uU(22),e.qZA(),e._uU(23,", determines the aggressiveness of the EMA. As "),e.TgZ(24,"mb-ki"),e._uU(25),e.qZA(),e._uU(26,", the last sample makes no impact, making the EMA line appear smoother. As "),e.TgZ(27,"mb-ki"),e._uU(28),e.qZA(),e._uU(29,", only the last sample determines the EMA value, so the input samples just pass through the filter. "),e._UZ(30,"p"),e._uU(31," In contrast with the "),e.TgZ(32,"a",8),e._uU(33,"Simple Moving Average"),e.qZA(),e._uU(34,", the EMA uses all historical samples, giving them the smaller and smaller weighting factors. This becomes obvious if we re-write equation (1) as "),e.TgZ(35,"mb-kd"),e._uU(36),e.qZA(),e.TgZ(37,"mb-kd"),e._uU(38),e.qZA(),e._uU(39," Sometimes, instead of "),e.TgZ(40,"mb-ki"),e._uU(41),e.qZA(),e._uU(42,", it is convenient to use and equivalent length "),e.TgZ(43,"mb-ki"),e._uU(44),e.qZA(),e._uU(45," of the SMA of the same smoothness, which is related to "),e.TgZ(46,"mb-ki"),e._uU(47),e.qZA(),e._uU(48," as "),e.TgZ(49,"mb-kd"),e._uU(50),e.qZA(),e._uU(51," As "),e.TgZ(52,"mb-ki"),e._uU(53),e.qZA(),e._uU(54,", "),e.TgZ(55,"mb-ki"),e._uU(56),e.qZA(),e._uU(57," becomes infinite, as "),e.TgZ(58,"mb-ki"),e._uU(59),e.qZA(),e._uU(60,", "),e.TgZ(61,"mb-ki"),e._uU(62),e.qZA(),e._uU(63," becomes one. The equation (2) can be written in terms of "),e.TgZ(64,"mb-ki"),e._uU(65),e.qZA(),e._uU(66," as "),e.TgZ(67,"mb-kd"),e._uU(68),e.qZA(),e._uU(69," From the digital signal processing (DSP) point of view, the EMA is an infinite impulse response (IIR) filter wich applies exponentially decresing weighting factors to the input samples. "),e._UZ(70,"p"),e.qZA(),e.TgZ(71,"h2"),e._uU(72,"Step response"),e.qZA(),e.TgZ(73,"div",7),e._uU(74," Two figures below demonstrate the response to the step-up and step-down data. The transition is clearly not linear. The step-up response doesn't overshoot and the step-down response doesn't undershoot the data.\n"),e.qZA(),e.TgZ(75,"figure",3),e._UZ(76,"mb-ohlcv-chart",4),e.TgZ(77,"figcaption"),e._uU(78,"Step-up response."),e.qZA()(),e.TgZ(79,"figure",3),e._UZ(80,"mb-ohlcv-chart",4),e.TgZ(81,"figcaption"),e._uU(82,"Step-down response."),e.qZA()(),e._UZ(83,"p"),e.TgZ(84,"div",7),e._uU(85," The step response of the EMA can be derived analytically.\nIt is the output of the EMA when a Heaviside step function (Oppenheim et al., 2009, p.13)\n"),e.TgZ(86,"mb-kd"),e._uU(87),e.qZA(),e._uU(88,"\nis applied as an input. Using equation (2),\n"),e.TgZ(89,"mb-kd"),e._uU(90),e.qZA(),e.TgZ(91,"mb-kd"),e._uU(92),e.qZA(),e._uU(93,"\nTo simplify the expression above, we can recall a sum of geometric series\n"),e.TgZ(94,"mb-kd"),e._uU(95),e.qZA(),e._uU(96,"\nMultiplying both sides by "),e.TgZ(97,"mb-ki"),e._uU(98),e.qZA(),e._uU(99," and simplifying\n"),e.TgZ(100,"mb-kd"),e._uU(101),e.qZA(),e.TgZ(102,"mb-kd"),e._uU(103),e.qZA(),e.TgZ(104,"mb-kd"),e._uU(105),e.qZA(),e._uU(106,"\ngives a well-known identity for a sum of geometric series (Jeffrey and Dai, 2008, 1.2.2.2):\n"),e.TgZ(107,"mb-kd"),e._uU(108),e.qZA(),e._uU(109,"\nSubstituting the sum of geometric series into equaton (5) gives\n"),e.TgZ(110,"mb-kd"),e._uU(111),e.qZA(),e.TgZ(112,"mb-kd"),e._uU(113),e.qZA(),e.TgZ(114,"mb-kd"),e._uU(115),e.qZA(),e._UZ(116,"p"),e._uU(117," The unit impulse response "),e.TgZ(118,"mb-ki"),e._uU(119),e.qZA(),e._uU(120," of the EMA is the output of the EMA when a Kronecker delta function\n"),e.TgZ(121,"mb-kd"),e._uU(122),e.qZA(),e._uU(123,"\nis applied to the input. Using the equation (2), we get\n"),e.TgZ(124,"mb-kd"),e._uU(125),e.qZA(),e.TgZ(126,"mb-kd"),e._uU(127),e.qZA(),e.TgZ(128,"mb-kd"),e._uU(129),e.qZA(),e._UZ(130,"p"),e.qZA(),e.TgZ(131,"h2"),e._uU(132,"Frequency response"),e.qZA(),e.TgZ(133,"div",7),e._uU(134," The figures below show an amplitude and a phase lag of the unit sample response of the EMA as a function of a period of various signal frequencies. "),e._UZ(135,"p"),e._uU(136," A period is a duration of a cycle in samples. The smallest possible period of a cycle is "),e.TgZ(137,"mb-ki"),e._uU(138),e.qZA(),e._uU(139," samples. To understand this, imagine a cycle of a sinusoid which starts at zero, goes up and peaks at "),e.TgZ(140,"mb-ki"),e._uU(141),e.qZA(),e._uU(142,", continues down and bottoms at "),e.TgZ(143,"mb-ki"),e._uU(144),e.qZA(),e._uU(145,", and then returns back to zero. We need at least two samples (peak and through) to represent a cycle. See more details in the "),e.TgZ(146,"a",8),e._uU(147),e.qZA(),e._uU(148,". "),e._UZ(149,"p"),e.qZA(),e.TgZ(150,"figure",3),e._UZ(151,"mb-frequency-response-chart",9)(152,"mb-frequency-response-chart",10),e.YNc(153,Y,14,3,"mat-expansion-panel",5),e.TgZ(154,"figcaption"),e._uU(155,"An amplitude (a) and a phase lag (b) as a function of a period of a cycle."),e.qZA()(),e._UZ(156,"p"),e.TgZ(157,"div",7),e._uU(158," The same charts can be represented as a function of a cycle's frequency. A period ("),e.TgZ(159,"mb-ki"),e._uU(160),e.qZA(),e._uU(161,") is an inverse of the cycle's frequency ("),e.TgZ(162,"mb-ki"),e._uU(163),e.qZA(),e._uU(164,"): "),e.TgZ(165,"mb-ki"),e._uU(166),e.qZA(),e._uU(167,". The smallest period "),e.TgZ(168,"mb-ki"),e._uU(169),e.qZA(),e._uU(170," corresponds to the Nyquist frequency "),e.TgZ(171,"mb-ki"),e._uU(172),e.qZA(),e._uU(173,"which is the highest frequency possible in a signal. Below we use the normalized frequency which has the value of "),e.TgZ(174,"mb-ki"),e._uU(175),e.qZA(),e._uU(176," at the Nyquist frequency. That is, "),e.TgZ(177,"mb-ki"),e._uU(178),e.qZA(),e._uU(179," corresponds to the infinite "),e.TgZ(180,"mb-ki"),e._uU(181),e.qZA(),e._uU(182,", "),e.TgZ(183,"mb-ki"),e._uU(184),e.qZA(),e._uU(185," corresponds to the "),e.TgZ(186,"mb-ki"),e._uU(187),e.qZA(),e._uU(188,". "),e._UZ(189,"p"),e.qZA(),e.TgZ(190,"figure",3),e._UZ(191,"mb-frequency-response-chart",9)(192,"mb-frequency-response-chart",11),e.TgZ(193,"figcaption"),e._uU(194,"An amplitude as a function of a period of a cycle (a) and as a function of a normalized frequency of a cycle (b) for various EMA lengths."),e.qZA()(),e.TgZ(195,"figure",3),e._UZ(196,"mb-frequency-response-chart",10)(197,"mb-frequency-response-chart",12),e.TgZ(198,"figcaption"),e._uU(199,"A phase as a function of a period of a wave (a) and as a function of a normalized frequency of a wave for various EMA lengths."),e.qZA()(),e._UZ(200,"p"),e.TgZ(201,"div",7),e._uU(202," The frequency response of the EMA can be derived analytically from the transfer function of the EMA.\nThe transfer function is defined using the unilateral Z-transform (Oppenheim et al., 2009, p.99)\n"),e.TgZ(203,"mb-kd"),e._uU(204),e.qZA(),e._uU(205,"\nwhere "),e.TgZ(206,"mb-ki"),e._uU(207),e.qZA(),e._uU(208," is a complex variable. If "),e.TgZ(209,"mb-kd"),e._uU(210),e.qZA(),e._uU(211,"\nare Z-transforms of the input "),e.TgZ(212,"mb-ki"),e._uU(213),e.qZA(),e._uU(214," and the output "),e.TgZ(215,"mb-ki"),e._uU(216),e.qZA(),e._uU(217,"\nrespectively, then the transfer function (sometimes called system function) is defined as\n(Oppenheim et al., 2009, p.131)\n"),e.TgZ(218,"mb-kd"),e._uU(219),e.qZA(),e._UZ(220,"p"),e._uU(221,"\nApplying Z-transorm to the equation (1) and using the linearity and the translation (time shift)\nproperties of the Z-transform translation (Oppenheim et al., 2009, pp.124-125)\n"),e.TgZ(222,"mb-kd"),e._uU(223),e.qZA(),e.TgZ(224,"mb-kd"),e._uU(225),e.qZA(),e._uU(226,"\nwe get:\n"),e.TgZ(227,"mb-kd"),e._uU(228),e.qZA(),e.TgZ(229,"mb-kd"),e._uU(230),e.qZA(),e.TgZ(231,"mb-kd"),e._uU(232),e.qZA(),e.TgZ(233,"mb-kd"),e._uU(234),e.qZA(),e.TgZ(235,"mb-kd"),e._uU(236),e.qZA(),e.TgZ(237,"mb-kd"),e._uU(238),e.qZA(),e._UZ(239,"p"),e._uU(240,"\nThe frequency response function is the transfer function where z is located on the unit circle,\n"),e.TgZ(241,"mb-ki"),e._uU(242),e.qZA(),e._uU(243,". Here "),e.TgZ(244,"mb-ki"),e._uU(245),e.qZA(),e._uU(246," is an angular frequency\n(in radians per sample), "),e.TgZ(247,"mb-ki"),e._uU(248),e.qZA(),e._uU(249," is a frequency, and "),e.TgZ(250,"mb-ki"),e._uU(251),e.qZA(),e._uU(252,"\nis a period of a cycle in samples:\n"),e.TgZ(253,"mb-kd"),e._uU(254),e.qZA(),e._uU(255,"\nThen, the equation (8) becomes\n"),e.TgZ(256,"mb-kd"),e._uU(257),e.qZA(),e._uU(258,"\nLet's calculate the squared modulus of the "),e.TgZ(259,"mb-ki"),e._uU(260),e.qZA(),e._uU(261," using the Euler's formula\nfor writing the exponential as sines and cosines: "),e.TgZ(262,"mb-ki"),e._uU(263),e.qZA(),e._uU(264,".\n"),e.TgZ(265,"mb-kd"),e._uU(266),e.qZA(),e.TgZ(267,"mb-kd"),e._uU(268),e.qZA(),e.TgZ(269,"mb-kd"),e._uU(270),e.qZA(),e.TgZ(271,"mb-kd"),e._uU(272),e.qZA(),e.TgZ(273,"mb-kd"),e._uU(274),e.qZA(),e._uU(275,"\nand\n"),e.TgZ(276,"mb-kd"),e._uU(277),e.qZA(),e._uU(278," (Mak, 2006, p.15) mentions that the phase of the "),e.TgZ(279,"mb-ki"),e._uU(280),e.qZA(),e._uU(281," can be derived as\n"),e.TgZ(282,"mb-kd"),e._uU(283),e.qZA(),e._uU(284,"\nWe can also express the phase lag "),e.TgZ(285,"mb-ki"),e._uU(286),e.qZA(),e._uU(287," in the equation above\nin terms of a lag in a number of bars (data points)\n"),e.TgZ(288,"mb-kd"),e._uU(289),e.qZA(),e._uU(290,"\nI was not able to derive both equations (12) and (13), and (Mak, 2006, p.15) do not have the simplified\nformula for the equation (13).\n"),e._UZ(291,"p"),e.qZA(),e._UZ(292,"div",7)(293,"hr"),e.TgZ(294,"h2",13),e._uU(295,"References"),e.qZA(),e.TgZ(296,"div"),e._uU(297," Jeffrey, A., & Dai, H. H. (2008). "),e.TgZ(298,"em"),e._uU(299,"Handbook of mathematical formulas and integrals"),e.qZA(),e._uU(300,". (4th ed., p. 592). San Diego, CA: Elsevier/Academic Press. "),e.TgZ(301,"a",14),e._uU(302,"google books"),e.qZA()(),e.TgZ(303,"div"),e._uU(304,"Mak, D. K. (2006). "),e.TgZ(305,"em"),e._uU(306,"Mathematical Techniques in Financial Market Trading"),e.qZA(),e._uU(307," (p. 320). doi:10.1142/6055 "),e.TgZ(308,"a",15),e._uU(309,"google books"),e.qZA()(),e.TgZ(310,"div"),e._uU(311,"Oppenheim, A. V., Schafer, R. W., Yoder, M. A., & Padgett, W. T. (2009). "),e.TgZ(312,"em"),e._uU(313,"Discrete-time signal processing"),e.qZA(),e._uU(314,". (3rd ed., p. 1120). Upper Saddle River, NJ: Pearson. "),e.TgZ(315,"a",16),e._uU(316,"google books"),e.qZA()()),2&a&&(e.xp6(1),e.Oqu(t.emaNote.title),e.xp6(1),e.Q6J("color","primary")("ngModel",t.unLocked),e.xp6(5),e.Q6J("configuration",t.configuration),e.xp6(1),e.Q6J("ngIf",t.unlocked),e.xp6(2),e.hij("",t.dataSelection.description,". "),e.xp6(1),e.Q6J("ngIf",t.dataSelection.url),e.xp6(5),e.hij(" ","\\tag*{(1)}ema_{k}=\\alpha x_{k} + (1-\\alpha)ema_{k-1}"," "),e.xp6(3),e.Oqu("\\alpha"),e.xp6(3),e.Oqu("0\\lt\\alpha\\lt 1"),e.xp6(3),e.Oqu("\\alpha \\rightarrow 0"),e.xp6(3),e.Oqu("\\alpha \\rightarrow 1"),e.xp6(4),e.MGl("href","/",t.smaNote.route,"",e.LSH),e.xp6(4),e.hij(" ","\\tag*{}ema_{k}=\\sum\\limits_{m=0}^{k}{\\alpha(1-\\alpha)^{m}x_{k-m}}"," "),e.xp6(2),e.hij(" ","\\tag*{(2)}=\\alpha\\sum\\limits_{m=0}^{k}{(1-\\alpha)^{m}x_{k-m}}"," "),e.xp6(3),e.Oqu("\\alpha"),e.xp6(3),e.Oqu("L"),e.xp6(3),e.Oqu("\\alpha"),e.xp6(3),e.hij(" ","\\tag*{(3)} L=\\frac{2}{\\alpha}-1, \\qquad \\alpha=\\frac{2}{L+1}"," "),e.xp6(3),e.Oqu("\\alpha \\rightarrow 0"),e.xp6(3),e.Oqu("L"),e.xp6(3),e.Oqu("\\alpha \\rightarrow 1"),e.xp6(3),e.Oqu("L"),e.xp6(3),e.Oqu("L"),e.xp6(3),e.hij(" ","\\tag*{(4)}ema_{k}=\\frac{2}{L+1}\\sum\\limits_{m=0}^{k}{ \\left(\\frac{L-1}{L+1}\\right)^{m}x_{k-m}}"," "),e.xp6(8),e.Q6J("configuration",t.configurationStepUp),e.xp6(4),e.Q6J("configuration",t.configurationStepDn),e.xp6(7),e.hij(" ","\\tag*{}H_{k} = \\begin{cases} 0, & k \\lt 0 \\\\ 1, & k \\ge 0 \\end{cases}","\n"),e.xp6(3),e.hij(" ","\\tag*{}ema_{k}^{step}=\\alpha\\sum\\limits_{m=0}^{k-1}{(1-\\alpha)^{m}H_{k-m}}","\n"),e.xp6(2),e.hij(" ","\\tag*{(5)}=\\alpha\\sum\\limits_{m=0}^{k-1}{(1-\\alpha)^{m}}","\n"),e.xp6(3),e.hij(" ","\\tag*{}\\sum_{m=0}^{k-1}x^m = 1 + x + x^2 + \\ldots + x^{k-1}","\n"),e.xp6(3),e.Oqu("1-x"),e.xp6(3),e.hij(" ","\\tag*{}(1-x)\\sum_{m=0}^{k-1}x^m = (1-x)(1 + x + x^2 + \\ldots + x^{k-1})","\n"),e.xp6(2),e.hij(" ","\\tag*{}= 1 + x + x^2 + \\ldots + x^{k-1} - x - x^2 - \\ldots - x^{k-1} - x^k","\n"),e.xp6(2),e.hij(" ","\\tag*{}= 1 - x^k","\n"),e.xp6(3),e.hij(" ","\\tag*{}\\sum_{m=0}^{k-1}x^m = \\begin{cases} (1-x^k)/(1-x), & x \\neq 1 \\\\ k, & x = 1 \\end{cases}","\n"),e.xp6(3),e.hij(" ","\\tag*{}ema_{k}^{step}=\\alpha\\sum\\limits_{m=0}^{k-1}{(1-\\alpha)^{m}}","\n"),e.xp6(2),e.hij(" ","\\tag*{}=\\alpha\\frac{1-(1-\\alpha)^k}{1-(1-\\alpha)}","\n"),e.xp6(2),e.hij(" ","\\tag*{(6)}=1-(1-\\alpha)^{k}","\n"),e.xp6(4),e.Oqu("h_{k}"),e.xp6(3),e.hij(" ","\\tag*{}\\delta_{k} = \\begin{cases} 1, & k=0 \\\\ 0, & k \\neq 0 \\end{cases}","\n"),e.xp6(3),e.hij(" ","\\tag*{}h_{k}=\\alpha\\sum\\limits_{m=0}^{\\infty}{(1-\\alpha)^{m}x_{k-m}}","\n"),e.xp6(2),e.hij(" ","\\tag*{}=\\alpha\\sum\\limits_{m=0}^{\\infty}{(1-\\alpha)^{m}\\delta_{k-m}}","\n"),e.xp6(2),e.hij(" ","\\tag*{(7)}=\\alpha(1-\\alpha)^{k}","\n"),e.xp6(9),e.Oqu("2"),e.xp6(3),e.Oqu("1"),e.xp6(3),e.Oqu("-1"),e.xp6(2),e.MGl("href","/",t.froaiNote.route,"",e.LSH),e.xp6(1),e.Oqu(t.froaiNote.title),e.xp6(4),e.Q6J("subfig","(a)")("width","100%")("height",t.freqsH)("ymode","amplitudePct")("xmode","period")("maxPeriod",t.maxPeriod)("data",t.freqs)("settingsPanelVisible",t.unlocked),e.xp6(1),e.Q6J("subfig","(b)")("width","100%")("height",t.freqsH)("ymode","phaseDegUnwrapped")("xmode","period")("maxPeriod",t.maxPeriod)("minDeg",-180)("maxDeg",180)("data",t.freqs)("settingsPanelVisible",t.unlocked),e.xp6(1),e.Q6J("ngIf",t.unlocked),e.xp6(7),e.Oqu("\\tau"),e.xp6(3),e.Oqu("\\nu"),e.xp6(3),e.Oqu("\\tau = \\frac{1}{\\nu}"),e.xp6(3),e.Oqu("\\tau = 2"),e.xp6(3),e.Oqu("\\nu = \\frac{1}{\\tau} = \\frac{1}{2}"),e.xp6(3),e.Oqu("1"),e.xp6(3),e.Oqu("0"),e.xp6(3),e.Oqu("\\tau"),e.xp6(3),e.Oqu("1"),e.xp6(3),e.Oqu("\\tau = 2"),e.xp6(4),e.Q6J("subfig","(a)")("width","100%")("height",200)("ymode","amplitudePct")("xmode","period")("maxPeriod",40)("data",e.l5B(144,_,t.ema2,t.ema5,t.ema10,t.ema20))("settingsPanelVisible",t.unlocked),e.xp6(1),e.Q6J("subfig","(b)")("width","100%")("height",200)("ymode","amplitudePct")("xmode","frequency")("data",e.l5B(149,_,t.ema2,t.ema5,t.ema10,t.ema20))("settingsPanelVisible",t.unlocked),e.xp6(4),e.Q6J("subfig","(a)")("width","100%")("height",200)("ymode","phaseDeg")("xmode","period")("maxPeriod",40)("minDeg",-70)("maxDeg",20)("data",e.l5B(154,_,t.ema2,t.ema5,t.ema10,t.ema20))("settingsPanelVisible",t.unlocked),e.xp6(1),e.Q6J("subfig","(b)")("width","100%")("height",200)("ymode","phaseDeg")("xmode","frequency")("minDeg",-70)("maxDeg",20)("data",e.l5B(159,_,t.ema2,t.ema5,t.ema10,t.ema20))("settingsPanelVisible",t.unlocked),e.xp6(7),e.hij(" ","\\tag*{}Z\\{x[n]\\}\\Leftrightarrow\\sum\\limits_{n=0}^{\\infty}{x[n]z^{-n}}","\n"),e.xp6(3),e.Oqu("z"),e.xp6(3),e.hij(" ","\\tag*{}X(z)=Z\\{x[n]\\}, \\qquad Y(z)=Z\\{y[n]\\}","\n"),e.xp6(3),e.Oqu("x[n]"),e.xp6(3),e.Oqu("y[n]"),e.xp6(3),e.hij(" ","\\tag*{}H(z)=\\frac{Y(z)}{X(z)}","\n"),e.xp6(4),e.hij(" ","\\tag*{}Z\\{y(n - m)\\}\\Leftrightarrow z^{-m}Y(z)","\n"),e.xp6(2),e.hij(" ","\\tag*{}Z\\{ax[n]+by[n]\\}\\Leftrightarrow aX(z)+bY(z)","\n"),e.xp6(3),e.hij(" ","\\tag*{}Z\\{y[n]\\}=Z\\{\\alpha x[n]+(1-\\alpha)y[n-1]\\}","\n"),e.xp6(2),e.hij(" ","\\tag*{}=\\alpha Z\\{x[n]\\}+(1-\\alpha)Z\\{y[n-1]\\}","\n"),e.xp6(2),e.hij(" ","\\tag*{}=\\alpha Z\\{x[n]\\}+(1-\\alpha)z^{-1}Z\\{y[n]\\}","\n"),e.xp6(2),e.hij(" ","\\tag*{}Y(z)=\\alpha X(z)+(1-\\alpha)z^{-1}Y(z)","\n"),e.xp6(2),e.hij(" ","\\tag*{}Y(z)(1-(1-\\alpha)z^{-1})=\\alpha X(z)","\n"),e.xp6(2),e.hij(" ","\\tag*{(8)}H(z)=\\frac{Y(z)}{X(z)}=\\frac{\\alpha}{1-(1-\\alpha)z^{-1}}","\n"),e.xp6(4),e.Oqu("z=exp(-i\\omega)"),e.xp6(3),e.Oqu("\\omega"),e.xp6(3),e.Oqu("\\nu"),e.xp6(3),e.Oqu("\\tau"),e.xp6(3),e.hij(" ","\\tag*{}\\omega = 2\\pi\\nu = \\frac{2\\pi}{\\tau}","\n"),e.xp6(3),e.hij(" ","\\tag*{(9)}H(\\omega)=\\frac{\\alpha}{1-(1-\\alpha)exp(-i\\omega)}","\n"),e.xp6(3),e.Oqu("H(\\omega)"),e.xp6(3),e.Oqu("exp(ix)=\\cos x+i\\sin x"),e.xp6(3),e.hij(" ","\\tag*{}\\left|H(\\omega)\\right|^{2}=\\frac{\\alpha^{2}}{\\left|1-(1-\\alpha)exp(-i\\omega)\\right|^{2}}","\n"),e.xp6(2),e.hij(" ","\\tag*{}=\\frac{\\alpha^{2}}{\\left|1-(1-\\alpha)(\\cos(-\\omega)+i\\sin(-\\omega))\\right|^{2}}","\n"),e.xp6(2),e.hij(" ","\\tag*{}=\\frac{\\alpha^{2}}{(1-(1-\\alpha)\\cos(\\omega))^{2}+((1-\\alpha)\\sin(\\omega))^{2}}","\n"),e.xp6(2),e.hij(" ","\\tag*{}=\\frac{\\alpha^{2}}{1-2(1-\\alpha)\\cos(\\omega)+(1-\\alpha)^{2}\\cos^{2}(\\omega)+(1-\\alpha)^{2}\\sin^{2}(\\omega)}","\n"),e.xp6(2),e.hij(" ","\\tag*{(10)}=\\frac{\\alpha^{2}}{1-2(1-\\alpha)\\cos(\\omega)+(1-\\alpha)^{2}}","\n"),e.xp6(3),e.hij(" ","\\tag*{(11)}\\left|H(\\omega)\\right|=\\frac{\\alpha}{\\sqrt{1-2(1-\\alpha)\\cos(\\omega)+(1-\\alpha)^{2}}}","\n"),e.xp6(3),e.Oqu("H(\\omega)"),e.xp6(3),e.hij(" ","\\tag*{(12)}\\phi(\\omega)=\\tan^{-1}\\left( \\frac{-(1-\\alpha)\\sin\\omega}{1-(1-\\alpha)\\cos\\omega} \\right)","\n"),e.xp6(3),e.Oqu("\\phi(\\omega)"),e.xp6(3),e.hij(" ","\\tag*{(13)}bar\\ lag=\\frac{\\phi(\\omega)}{\\omega}","\n"))},dependencies:[c.O5,p.Fj,p.wV,p.JJ,p.qQ,p.Fd,p.On,x.KE,x.hX,y.Nt,d.Hw,f.ib,f.yz,f.yK,v.Rr,o.GJY,o.JJg,o.kDz,o.T1Q,j.h,o.y29,N],styles:[".ohlcv-chart-study[_ngcontent-%COMP%]{margin:0;padding:0}.button[_ngcontent-%COMP%]{margin-right:8px}.slide-toggle[_ngcontent-%COMP%]{float:right;margin:0 8px 0 0}.icon[_ngcontent-%COMP%]{vertical-align:bottom}"],changeDetection:0}),r})()},{path:"**",redirectTo:""}];let W=(()=>{var n;class r{}return(n=r).\u0275fac=function(a){return new(a||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[C.Bz.forChild(X),C.Bz]}),r})(),$=(()=>{var n;class r{}return(n=r).\u0275fac=function(a){return new(a||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,p.u5,x.lN,y.c,U.ot,d.Ps,f.To,v.rP,S.N6,o.Fd9,o.hXN,o.ylR,o.U8i,o._km,o.idH,o.jkk,J.S,o.feT,W]}),r})()}}]);