"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[802],{802:(W,y,r)=>{r.r(y),r.d(y,{TrimaModule:()=>j});var h=r(6814),d=r(6223),q=r(9157),x=r(2032),U=r(2296),c=r(617),p=r(3305),w=r(2599),O=r(3176),s=r(3751),I=r(5501),v=r(1896),A=r(9383),e=r(9212),S=r(3367);function J(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"mb-line-style-selector",3),e.NdJ("selectionChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.updateStyle(i))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("initial",t.current.style)("label","Line")}}let Q=(()=>{class n{constructor(){this.removed=new e.vpe,this.changed=new e.vpe}set initial(t){this.current=t}updateStyle(t){this.current.style=t,this.changed.emit(this.current)}updateParams(t){this.current.params=t,this.changed.emit(this.current)}remove(){this.removed.emit(this.current)}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-trima-params"]],inputs:{initial:"initial"},outputs:{removed:"removed",changed:"changed"},decls:6,vars:2,consts:[["mat-icon-button","","color","warn",3,"click"],[3,"initial","selectionChange"],[3,"initial","label","selectionChange",4,"ngIf"],[3,"initial","label","selectionChange"]],template:function(a,i){1&a&&(e.TgZ(0,"div")(1,"button",0),e.NdJ("click",function(){return i.remove()}),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()(),e.TgZ(4,"mb-triangular-moving-average-params",1),e.NdJ("selectionChange",function(u){return i.updateParams(u)}),e.qZA(),e.YNc(5,J,1,2,"mb-line-style-selector",2),e.qZA()),2&a&&(e.xp6(4),e.Q6J("initial",i.current.params),e.xp6(1),e.Q6J("ngIf",i.current.showStyle))},dependencies:[h.O5,U.RK,c.Hw,s.GKN,s.zoJ],changeDetection:0})}return n})();function F(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"app-trima-params",2),e.NdJ("changed",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.updated(i))})("removed",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.removed(i))}),e.qZA()}2&n&&e.Q6J("initial",l.$implicit)}const N=()=>{const n=new s.TD4;return n.color="",n.width=1.5,n.dash="",n.interpolation="camullRom",n},k=(n,l,t)=>({params:{length:l,barComponent:t},style:N(),showStyle:n});let H=(()=>{class n{constructor(){this.changed=new e.vpe,this.trimaArray=[],this.colorArray=["#ff0000"],this.initialized=!1}set initial(t){const a=[];for(let i=0;i<t.length.length;i++){const o=k(t.showStyle,t.length[i],t.barComponent);o.style.color=this.colorArray[i%this.colorArray.length],a.push(o)}this.trimaArray=a,this.defaultBarComponent=t.barComponent}set colors(t){if(t&&t.length>0){const a=[];this.colorArray=t;for(let i=0;i<this.trimaArray.length;i++){const o={...this.trimaArray[i]};o.style.color=t[i%t.length],a.push(o)}this.trimaArray=a}}ngAfterViewInit(){this.initialized=!0,this.changed.emit(this.trimaArray)}add(){const t=this.getShowStyle(),a=k(t,this.getLastLength()+5,this.defaultBarComponent);t&&(a.style.color=this.colorArray[this.trimaArray.length%this.colorArray.length]),this.trimaArray.push(a),this.trimaArray=[...this.trimaArray],this.notify()}updated(t){this.getIndex(t)>=0&&this.notify()}removed(t){const a=this.getIndex(t);a>=0&&(this.trimaArray.splice(a,1),this.trimaArray=[...this.trimaArray],this.notify())}getLastLength(){const t=this.trimaArray.length-1;return t<0?0:this.trimaArray[t].params.length}getShowStyle(){return!(this.trimaArray.length<=0)&&this.trimaArray[0].showStyle}getIndex(t){for(let a=0;a<this.trimaArray.length;a++)if(this.trimaArray[a]===t)return a;return-1}notify(){this.initialized&&this.changed.emit(this.trimaArray)}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-trima-list"]],inputs:{initial:"initial",colors:"colors"},outputs:{changed:"changed"},decls:5,vars:1,consts:[[3,"initial","changed","removed",4,"ngFor","ngForOf"],["mat-mini-fab","","color","primary",3,"click"],[3,"initial","changed","removed"]],template:function(a,i){1&a&&(e.YNc(0,F,1,1,"app-trima-params",0),e.TgZ(1,"div")(2,"button",1),e.NdJ("click",function(){return i.add()}),e.TgZ(3,"mat-icon"),e._uU(4,"add"),e.qZA()()()),2&a&&e.Q6J("ngForOf",i.trimaArray)},dependencies:[h.sg,U.nh,c.Hw,Q]})}return n})();function R(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"mat-expansion-panel",18)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),e._uU(4,"tune"),e.qZA()()(),e.TgZ(5,"mb-swatches-select",19),e.NdJ("selectionChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.indicatorPaletteChanged(i))}),e.qZA(),e.TgZ(6,"app-trima-list",20),e.NdJ("changed",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.indicatorsChanged(i))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("selected",t.selectedIndex)("colors",t.palettes)("label","Palette"),e.xp6(1),e.Q6J("initial",t.initialIndicators)("colors",t.selectedPalette)}}function z(n,l){if(1&n&&(e.TgZ(0,"span")(1,"a",21),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.s9C("href",t.dataSelection.url,e.LSH),e.xp6(1),e.Oqu(t.dataSelection.urlName)}}function Y(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"mat-expansion-panel",18)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),e._uU(4,"tune"),e.qZA()()(),e.TgZ(5,"mat-form-field",22)(6,"mat-label"),e._uU(7,"Max period to display"),e.qZA(),e.TgZ(8,"input",23),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.maxPeriod=i)}),e.qZA()(),e.TgZ(9,"mat-form-field",22)(10,"mat-label"),e._uU(11,"Height"),e.qZA(),e.TgZ(12,"input",24),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.freqsH=i)}),e.qZA()(),e.TgZ(13,"app-trima-list",25),e.NdJ("changed",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.freqsChanged(i))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(8),e.Q6J("ngModel",t.maxPeriod),e.xp6(4),e.Q6J("ngModel",t.freqsH),e.xp6(1),e.Q6J("initial",t.initialFreqs)}}const _=(n,l,t)=>[n,l,t],Z=(n,l)=>[n,l],m=4096,D=(n,l,t)=>{const a=[],i=(0,s.HMQ)(t);for(const o of n)a.push({time:o.time,value:l.update(i(o))});return a},K=(n,l,t)=>{const a=(0,s.HMQ)(t),i=a(n[0]);for(;!l.isPrimed;)l.update(i);const o=[];for(const u of n)o.push({time:u.time,value:l.update(a(u))});return o},G=[{path:"",component:(()=>{class n{constructor(){this.indicators=[],this.initialized=!1,this.selectedIndex=0,this.initialIndicators={length:[5,10,20],barComponent:s.R2K.Median,showStyle:!0},this.initialFreqs={length:[5,10,20],showStyle:!1},this.palettes=(0,s.$rL)(this.initialIndicators.length.length),this.selectedPalette=this.palettes[this.selectedIndex],this.smaNote=A.Et,this.trimaNote=A.Wb,this.froaiNote=A.rI,this.freqs=[],this.freqsMaxPeriod=40,this.freqsHeight=300,this.unlocked=!0,this.dataStepUp=(0,s.TYA)(10,32,90,96,1),this.dataStepDn=(0,s.TYA)(90,32,10,96,1),this.trima2=s.Z7F.calculate(m,new s.Yl0({length:2}),4),this.trima3=s.Z7F.calculate(m,new s.Yl0({length:3}),6),this.trima4=s.Z7F.calculate(m,new s.Yl0({length:4}),8),this.trima5=s.Z7F.calculate(m,new s.Yl0({length:5}),10),this.trima6=s.Z7F.calculate(m,new s.Yl0({length:6}),12),this.trima7=s.Z7F.calculate(m,new s.Yl0({length:7}),14),this.trima10=s.Z7F.calculate(m,new s.Yl0({length:10}),20,1),this.trima20=s.Z7F.calculate(m,new s.Yl0({length:20}),40,1)}get maxPeriod(){return this.freqsMaxPeriod}set maxPeriod(t){(!t||t<2)&&(t=2),this.freqsMaxPeriod=t,this.freqs.length>0&&(this.freqs=[...this.freqs])}get freqsH(){return this.freqsHeight}set freqsH(t){this.freqsHeight=t,this.freqs.length>0&&(this.freqs=[...this.freqs])}get unLocked(){return this.unlocked}set unLocked(t){this.unlocked=t,this.render()}ngAfterViewInit(){this.initialized=!0,this.unlocked=!1,this.render()}indicatorPaletteChanged(t){this.selectedIndex=this.palettes.indexOf(t),this.selectedPalette=t}indicatorsChanged(t){const a=t.length>2?t.length:2;a!==this.selectedPalette.length&&(this.palettes=(0,s.$rL)(a),this.selectedIndex>=a&&(this.selectedIndex=0),this.selectedPalette=this.palettes[this.selectedIndex]),this.indicators=t,this.render()}freqsChanged(t){const a=[];for(const i of t){const o=i.params.length,u=s.Z7F.calculate(m,new s.Yl0({length:o}),2*o);a.push(u)}this.freqs=a}dataSelectionChanged(t){this.dataSelection=t,this.render()}render(){this.initialized&&(this.configuration=this.prepareConfig(this.dataSelection.mnemonic,this.dataSelection.data,!1),this.configurationStepUp=this.prepareConfig("",this.dataStepUp,!0),this.configurationStepDn=this.prepareConfig("",this.dataStepDn,!0))}prepareConfig(t,a,i){const o={width:"100%",widthMin:360,navigationPane:{height:30,heightMin:30,heightMax:30,hasLine:!1,hasArea:!0,hasTimeAxis:!1,timeTicks:0},heightNavigationPane:30,timeAnnotationFormat:"%Y-%m-%d",axisLeft:!0,axisRight:!1,margin:{left:0,top:10,right:20,bottom:0},ohlcv:{name:"",data:[],candlesticks:!1},pricePane:{height:"30%",heightMin:300,heightMax:800,valueMarginPercentageFactor:.01,valueFormat:",.2f",bands:[],lineAreas:[],horizontals:[],arrows:[],lines:[]},indicatorPanes:[],crosshair:!1,volumeInPricePane:!1,menuVisible:!0,downloadSvgVisible:!0};o.menuVisible=this.unlocked,o.ohlcv.name=t,o.ohlcv.data=a;for(const u of this.indicators){const P=u.params.barComponent?u.params.barComponent:s.R2K.Close,b=new s.Yl0(u.params),g=new s.ha4;g.name=b.getMnemonic(),g.data=i?K(a,b,P):D(a,b,P);const T=u.style;g.color=T.color,g.width=T.width,g.dash=T.dash,g.interpolation=T.interpolation,o.pricePane.lines.push(g)}return o}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-ind-trima"]],decls:458,vars:173,consts:[[1,"slide-toggle",3,"color","ngModel","ngModelChange"],[1,"icon"],["label","",3,"selectionChange"],[1,"figwide"],[1,"ohlcv-chart-study",3,"configuration"],["expanded","false","style","margin-bottom: 1em;",4,"ngIf"],[4,"ngIf"],[2,"width","100%"],[1,"figleft"],["src","assets/indicators/trima-weights-6.svg",3,"scaleToContainer"],["src","assets/indicators/trima-weights-5.svg",3,"scaleToContainer"],["src","assets/indicators/sma-weights-5.svg",3,"scaleToContainer"],[3,"href"],["src","assets/indicators/trima-sma-over-sma-6.svg",3,"scaleToContainer"],["src","assets/indicators/trima-sma-over-sma-5.svg",3,"scaleToContainer"],[3,"subfig","width","height","ymode","xmode","maxPeriod","data","settingsPanelVisible"],[1,"tablecaption"],[3,"subfig","width","height","ymode","xmode","data","settingsPanelVisible"],["expanded","false",2,"margin-bottom","1em"],[2,"vertical-align","bottom",3,"selected","colors","label","selectionChange"],[3,"initial","colors","changed"],["target","_blank",3,"href"],["appearance","fill"],["matInput","","type","number","min","8","max","1024","step","1",3,"ngModel","ngModelChange"],["matInput","","type","number","min","100","max","1024","step","1",3,"ngModel","ngModelChange"],[3,"initial","changed"]],template:function(a,i){1&a&&(e.TgZ(0,"h1"),e._uU(1),e.qZA(),e.TgZ(2,"mat-slide-toggle",0),e.NdJ("ngModelChange",function(u){return i.unLocked=u}),e.TgZ(3,"mat-icon",1),e._uU(4,"tune"),e.qZA()(),e.TgZ(5,"app-bar-series-select",2),e.NdJ("selectionChange",function(u){return i.dataSelectionChanged(u)}),e.qZA(),e.TgZ(6,"figure",3),e._UZ(7,"mb-ohlcv-chart",4),e.YNc(8,R,7,5,"mat-expansion-panel",5),e.TgZ(9,"figcaption"),e._uU(10),e.YNc(11,z,3,2,"span",6),e.qZA()(),e._UZ(12,"p"),e.TgZ(13,"div",7)(14,"figure",8),e._uU(15," (a) "),e._UZ(16,"mb-svg-viewer",9),e._uU(17," (b) "),e._UZ(18,"mb-svg-viewer",10),e._uU(19," (c) "),e._UZ(20,"mb-svg-viewer",11),e.TgZ(21,"figcaption"),e._uU(22,"Weight coefficients of the (a) TRIMA(6), (b) TRIMA(5) and (c) SMA(5)."),e.qZA()(),e._UZ(23,"p"),e._uU(24," A triangular moving average (TRIMA) of length "),e.TgZ(25,"mb-ki"),e._uU(26,"L \\ge 2"),e.qZA(),e._uU(27," is a weighted mean of the last "),e.TgZ(28,"mb-ki"),e._uU(29,"L"),e.qZA(),e._uU(30," observations of a series "),e.TgZ(31,"mb-ki"),e._uU(32),e.qZA(),e._uU(33,", where "),e.TgZ(34,"mb-ki"),e._uU(35),e.qZA(),e._uU(36," is the most recent value and "),e.TgZ(37,"mb-ki"),e._uU(38,"k \\ge L"),e.qZA(),e._uU(39,": "),e.TgZ(40,"mb-kd"),e._uU(41),e.qZA(),e._uU(42," The values of the weighting coefficients "),e.TgZ(43,"mb-ki"),e._uU(44,"w_m"),e.qZA(),e._uU(45," form a triangle shape with the top angle centered in the middle of the moving average window. In case of the even value of "),e.TgZ(46,"mb-ki"),e._uU(47,"L"),e.qZA(),e._uU(48,', there are two samples located in the "middle" of the window and the top angle of the imaginary triangle is located between them. Figure 2 shows TRIMA weighting coefficients for the even and odd values of '),e.TgZ(49,"mb-ki"),e._uU(50,"L"),e.qZA(),e._uU(51,", comparing them with the weighting coefficients of the "),e.TgZ(52,"a",12),e._uU(53,"Simple Moving Average"),e.qZA(),e._uU(54,", which are all equal. "),e._UZ(55,"p"),e._uU(56," Knowing this difference, we can represent the values of the weighting coefficients "),e.TgZ(57,"mb-ki"),e._uU(58,"w_m"),e.qZA(),e._uU(59," for both even and odd values of "),e.TgZ(60,"mb-ki"),e._uU(61,"L"),e.qZA(),e._uU(62," as: "),e.TgZ(63,"mb-kd"),e._uU(64),e.qZA(),e._uU(65," It is easy to see that "),e.TgZ(66,"mb-ki"),e._uU(67,"w_m"),e.qZA(),e._uU(68," values form two arithmetic progressions, one ascending and one descending. This allows us to calculate the sum of weighting coefficients in denominator of equation (1). "),e._UZ(69,"p"),e._uU(70," Let's consider an arithmetic progression: "),e.TgZ(71,"mb-kd"),e._uU(72),e.qZA(),e._uU(73," Its sum when starting summation from the very first element is: "),e.TgZ(74,"mb-kd"),e._uU(75),e.qZA(),e._uU(76," If we start summation from the very last element, the sum is: "),e.TgZ(77,"mb-kd"),e._uU(78),e.qZA(),e._uU(79," Summing up the two above equations gives: "),e.TgZ(80,"mb-kd"),e._uU(81),e.qZA(),e._uU(82," Let's apply this equation to sum up all weighting coefficients from equation (2). For an even "),e.TgZ(83,"mb-ki"),e._uU(84,"L=2l"),e.qZA(),e._uU(85,": "),e.TgZ(86,"mb-kd"),e._uU(87),e.qZA(),e.TgZ(88,"mb-kd"),e._uU(89),e.qZA(),e.TgZ(90,"mb-kd"),e._uU(91),e.qZA(),e.TgZ(92,"mb-kd"),e._uU(93),e.qZA(),e.TgZ(94,"mb-kd"),e._uU(95),e.qZA(),e.TgZ(96,"mb-kd"),e._uU(97),e.qZA(),e._uU(98," For an odd "),e.TgZ(99,"mb-ki"),e._uU(100,"L=2l+1"),e.qZA(),e._uU(101,": "),e.TgZ(102,"mb-kd"),e._uU(103),e.qZA(),e.TgZ(104,"mb-kd"),e._uU(105),e.qZA(),e.TgZ(106,"mb-kd"),e._uU(107),e.qZA(),e.TgZ(108,"mb-kd"),e._uU(109),e.qZA(),e.TgZ(110,"mb-kd"),e._uU(111),e.qZA(),e.TgZ(112,"mb-kd"),e._uU(113),e.qZA(),e._uU(114," Hence, combining equations (2), (3) and (4), we can write equation (1) only in terms of "),e.TgZ(115,"mb-ki"),e._uU(116,"L"),e.qZA(),e._uU(117,": "),e.TgZ(118,"mb-kd"),e._uU(119),e.qZA(),e._uU(120," The TRIMA is a finite impulse response (FIR) filter because only a finite number of "),e.TgZ(121,"mb-ki"),e._uU(122),e.qZA(),e._uU(123," last samples contribute to its value. "),e._UZ(124,"p"),e._uU(125," The TRIMA is equivalent to doing an SMA of an SMA. As usial, the even and the odd cases are slightly different. "),e.TgZ(126,"mb-kd"),e._uU(127),e.qZA(),e._UZ(128,"p"),e.TgZ(129,"figure",8),e._uU(130," (a) "),e._UZ(131,"mb-svg-viewer",13),e._uU(132," (b) "),e._UZ(133,"mb-svg-viewer",14),e.TgZ(134,"figcaption"),e._uU(135,"SMA over SMA calculation grid for the even and odd length of the TRIMA: (a) TRIMA(6) and (b) TRIMA(5)."),e.qZA()(),e._uU(136," This equation can be used for an efficient calcultion of the TRIMA. "),e._UZ(137,"p"),e._uU(138," I couldn't derive the equation (6) algebraically, but its working is illustrated on the figure 3. Here horizontal triplets, representing the inner SMA, are moving over the samples "),e.TgZ(139,"mb-ki"),e._uU(140),e.qZA(),e._uU(141," of the TRIMA window. Initially, the triplet resides on the left edge of the window. On every move, it shifts one sample to the right until it reaches the right edge of the window. During this sliding, some samples are covered by the triplet more than once. The bottom row shows the count "),e.TgZ(142,"mb-ki"),e._uU(143),e.qZA(),e._uU(144," (weight) for the every sample. The weight values form an imaginary triangular shape, similar to ones on the figure 2. "),e._UZ(145,"p"),e.qZA(),e.TgZ(146,"h2"),e._uU(147,"Step response"),e.qZA(),e.TgZ(148,"div",7),e._uU(149," Two figures below demonstrate the response to the step-up and step-down data. The transition is clearly not linear. Both responses touch the step data with the lag equal to the length "),e.TgZ(150,"mb-ki"),e._uU(151),e.qZA(),e._uU(152," of the filter. The step-up response doesn't overshoot and the step-down response doesn't undershoot the data. "),e._UZ(153,"p"),e.TgZ(154,"figure",3),e._UZ(155,"mb-ohlcv-chart",4),e.TgZ(156,"figcaption"),e._uU(157,"Step-up response."),e.qZA()(),e.TgZ(158,"figure",3),e._UZ(159,"mb-ohlcv-chart",4),e.TgZ(160,"figcaption"),e._uU(161,"Step-down response."),e.qZA()(),e._UZ(162,"p"),e.qZA(),e.TgZ(163,"h2"),e._uU(164,"Frequency response"),e.qZA(),e.TgZ(165,"div",7),e._uU(166," The figures below show an amplitude and a phase lag of the unit sample response of the TRIMA as a function of a period of various signal frequencies. "),e._UZ(167,"p"),e._uU(168," A period is a duration of a cycle in samples. The smallest possible period of a cycle is "),e.TgZ(169,"mb-ki"),e._uU(170),e.qZA(),e._uU(171," samples. To understand this, imagine a cycle of a sinusoid which starts at zero, goes up and peaks at "),e.TgZ(172,"mb-ki"),e._uU(173),e.qZA(),e._uU(174,", continues down and bottoms at "),e.TgZ(175,"mb-ki"),e._uU(176),e.qZA(),e._uU(177,", and then returns back to zero. We need at least two samples (peak and through) to represent a cycle. See more details in the "),e.TgZ(178,"a",12),e._uU(179),e.qZA(),e._uU(180,". "),e._UZ(181,"p"),e._uU(182," The same charts can be represented as a function of a cycle's frequency. A period ("),e.TgZ(183,"mb-ki"),e._uU(184),e.qZA(),e._uU(185,") is an inverse of the cycle's frequency ("),e.TgZ(186,"mb-ki"),e._uU(187),e.qZA(),e._uU(188,"): "),e.TgZ(189,"mb-ki"),e._uU(190),e.qZA(),e._uU(191,". The smallest period "),e.TgZ(192,"mb-ki"),e._uU(193),e.qZA(),e._uU(194," corresponds to the Nyquist frequency "),e.TgZ(195,"mb-ki"),e._uU(196),e.qZA(),e._uU(197,"which is the highest frequency possible in a signal. Below we use the normalized frequency which has the value of "),e.TgZ(198,"mb-ki"),e._uU(199),e.qZA(),e._uU(200," at the Nyquist frequency. That is, "),e.TgZ(201,"mb-ki"),e._uU(202),e.qZA(),e._uU(203," corresponds to the infinite "),e.TgZ(204,"mb-ki"),e._uU(205),e.qZA(),e._uU(206,", "),e.TgZ(207,"mb-ki"),e._uU(208),e.qZA(),e._uU(209," corresponds to the "),e.TgZ(210,"mb-ki"),e._uU(211),e.qZA(),e._uU(212,". "),e._UZ(213,"p"),e.qZA(),e.TgZ(214,"figure",3),e._UZ(215,"mb-frequency-response-chart",15)(216,"mb-frequency-response-chart",15),e.YNc(217,Y,14,3,"mat-expansion-panel",5),e.TgZ(218,"figcaption"),e._uU(219,"An amplitude (a) and a phase lag (b) as a function of a period of a cycle."),e.qZA()(),e._UZ(220,"p"),e.TgZ(221,"div",7),e._uU(222," The shape of the amplitude response is slightly different for the different values of "),e.TgZ(223,"mb-ki"),e._uU(224),e.qZA(),e._uU(225,". It is interesting that the amplitude response poles of the TRIMA are formed by the lengthes of the inner and the outer SMAs in equation (6). Only if both "),e.TgZ(226,"mb-ki"),e._uU(227),e.qZA(),e._uU(228," and "),e.TgZ(229,"mb-ki"),e._uU(230),e.qZA(),e._uU(231," are odd, the amplitude attenuation percentage at the smallest period "),e.TgZ(232,"mb-ki"),e._uU(233),e.qZA(),e._uU(234," will stay above zero. If either "),e.TgZ(235,"mb-ki"),e._uU(236),e.qZA(),e._uU(237," or "),e.TgZ(238,"mb-ki"),e._uU(239),e.qZA(),e._uU(240," are even, the percentage will be almost zero. The table 1 below illustrates this. "),e._UZ(241,"p"),e.TgZ(242,"table")(243,"thead")(244,"td")(245,"mb-ki"),e._uU(246),e.qZA()(),e.TgZ(247,"td")(248,"mb-ki"),e._uU(249),e.qZA()(),e.TgZ(250,"td")(251,"mb-ki"),e._uU(252),e.qZA()(),e.TgZ(253,"td")(254,"mb-ki"),e._uU(255),e.qZA()(),e.TgZ(256,"td")(257,"mb-ki"),e._uU(258),e.qZA()(),e.TgZ(259,"td")(260,"mb-ki"),e._uU(261),e.qZA()()(),e.TgZ(262,"tbody")(263,"tr")(264,"td"),e._uU(265,"2"),e.qZA(),e.TgZ(266,"td"),e._uU(267,"1"),e.qZA(),e.TgZ(268,"td"),e._uU(269,"1"),e.qZA(),e.TgZ(270,"td"),e._uU(271,"2"),e.qZA(),e.TgZ(272,"td"),e._uU(273,"-100"),e.qZA(),e._UZ(274,"td"),e.qZA(),e.TgZ(275,"tr")(276,"td"),e._uU(277,"3"),e.qZA(),e.TgZ(278,"td"),e._uU(279,"1"),e.qZA(),e.TgZ(280,"td"),e._uU(281,"2"),e.qZA(),e.TgZ(282,"td"),e._uU(283,"2"),e.qZA(),e.TgZ(284,"td"),e._uU(285,"-100"),e.qZA(),e._UZ(286,"td"),e.qZA(),e.TgZ(287,"tr")(288,"td"),e._uU(289,"4"),e.qZA(),e.TgZ(290,"td"),e._uU(291,"2"),e.qZA(),e.TgZ(292,"td"),e._uU(293,"2"),e.qZA(),e.TgZ(294,"td"),e._uU(295,"3"),e.qZA(),e.TgZ(296,"td"),e._uU(297,"-100"),e.qZA(),e.TgZ(298,"td"),e._uU(299,"3"),e.qZA()(),e.TgZ(300,"tr")(301,"td"),e._uU(302,"5"),e.qZA(),e.TgZ(303,"td"),e._uU(304,"2"),e.qZA(),e.TgZ(305,"td"),e._uU(306,"3"),e.qZA(),e.TgZ(307,"td"),e._uU(308,"3"),e.qZA(),e.TgZ(309,"td"),e._uU(310,"-20"),e.qZA(),e.TgZ(311,"td"),e._uU(312,"3"),e.qZA()(),e.TgZ(313,"tr")(314,"td"),e._uU(315,"6"),e.qZA(),e.TgZ(316,"td"),e._uU(317,"3"),e.qZA(),e.TgZ(318,"td"),e._uU(319,"3"),e.qZA(),e.TgZ(320,"td"),e._uU(321,"4"),e.qZA(),e.TgZ(322,"td"),e._uU(323,"-100"),e.qZA(),e.TgZ(324,"td"),e._uU(325,"4, 3"),e.qZA()(),e.TgZ(326,"tr")(327,"td"),e._uU(328,"7"),e.qZA(),e.TgZ(329,"td"),e._uU(330,"3"),e.qZA(),e.TgZ(331,"td"),e._uU(332,"4"),e.qZA(),e.TgZ(333,"td"),e._uU(334,"4"),e.qZA(),e.TgZ(335,"td"),e._uU(336,"-100"),e.qZA(),e.TgZ(337,"td"),e._uU(338,"4"),e.qZA()(),e.TgZ(339,"tr")(340,"td"),e._uU(341,"8"),e.qZA(),e.TgZ(342,"td"),e._uU(343,"4"),e.qZA(),e.TgZ(344,"td"),e._uU(345,"4"),e.qZA(),e.TgZ(346,"td"),e._uU(347,"5"),e.qZA(),e.TgZ(348,"td"),e._uU(349,"-100"),e.qZA(),e.TgZ(350,"td"),e._uU(351,"5, 4, 5/2=2.5"),e.qZA()(),e.TgZ(352,"tr")(353,"td"),e._uU(354,"9"),e.qZA(),e.TgZ(355,"td"),e._uU(356,"4"),e.qZA(),e.TgZ(357,"td"),e._uU(358,"5"),e.qZA(),e.TgZ(359,"td"),e._uU(360,"5"),e.qZA(),e.TgZ(361,"td"),e._uU(362,"-30"),e.qZA(),e.TgZ(363,"td"),e._uU(364,"5, 5/2=2.5"),e.qZA()(),e.TgZ(365,"tr")(366,"td"),e._uU(367,"10"),e.qZA(),e.TgZ(368,"td"),e._uU(369,"5"),e.qZA(),e.TgZ(370,"td"),e._uU(371,"5"),e.qZA(),e.TgZ(372,"td"),e._uU(373,"6"),e.qZA(),e.TgZ(374,"td"),e._uU(375,"-100"),e.qZA(),e.TgZ(376,"td"),e._uU(377,"6, 5, 6/2=3, 5/2=2.5"),e.qZA()(),e.TgZ(378,"tr")(379,"td"),e._uU(380,"11"),e.qZA(),e.TgZ(381,"td"),e._uU(382,"5"),e.qZA(),e.TgZ(383,"td"),e._uU(384,"6"),e.qZA(),e.TgZ(385,"td"),e._uU(386,"6"),e.qZA(),e.TgZ(387,"td"),e._uU(388,"-100"),e.qZA(),e.TgZ(389,"td"),e._uU(390,"6, 6/2=3"),e.qZA()(),e.TgZ(391,"tr")(392,"td"),e._uU(393,"12"),e.qZA(),e.TgZ(394,"td"),e._uU(395,"6"),e.qZA(),e.TgZ(396,"td"),e._uU(397,"6"),e.qZA(),e.TgZ(398,"td"),e._uU(399,"7"),e.qZA(),e.TgZ(400,"td"),e._uU(401,"-100"),e.qZA(),e.TgZ(402,"td"),e._uU(403,"7, 6, 7/2=3.5, 6/2=3, 7/3=2.3"),e.qZA()(),e.TgZ(404,"tr")(405,"td"),e._uU(406,"13"),e.qZA(),e.TgZ(407,"td"),e._uU(408,"6"),e.qZA(),e.TgZ(409,"td"),e._uU(410,"7"),e.qZA(),e.TgZ(411,"td"),e._uU(412,"7"),e.qZA(),e.TgZ(413,"td"),e._uU(414,"-35"),e.qZA(),e.TgZ(415,"td"),e._uU(416,"7, 7/2=3.5, 7/3=2.3"),e.qZA()(),e.TgZ(417,"tr")(418,"td"),e._uU(419,"14"),e.qZA(),e.TgZ(420,"td"),e._uU(421,"7"),e.qZA(),e.TgZ(422,"td"),e._uU(423,"7"),e.qZA(),e.TgZ(424,"td"),e._uU(425,"8"),e.qZA(),e.TgZ(426,"td"),e._uU(427,"-100"),e.qZA(),e.TgZ(428,"td"),e._uU(429,"8, 7, 8/2=4, 7/2=3.5, 8/3=2.7, 7/3=2.3"),e.qZA()()()(),e.TgZ(430,"div",16),e._uU(431,"The poles of the amplitude response for increasing length of the TRIMA."),e.qZA(),e._UZ(432,"p"),e._uU(433," The shape of the unwrapped frequency response is linear with respect to a normalized frequency, and is hyperbolic with respect to a period. This is natural because TRIMA is formed by the outer SMA over the inner SMA. "),e._UZ(434,"p"),e._uU(435," Amplitude and phase responses are illusrated in figures below both for the period (in samples) and the normalized frequency. "),e._UZ(436,"p"),e.qZA(),e.TgZ(437,"figure",3),e._UZ(438,"mb-frequency-response-chart",15)(439,"mb-frequency-response-chart",15),e.TgZ(440,"figcaption"),e._uU(441,"An amplitude as a function of a period of a cycle for even (a) and odd (b) TRIMA length."),e.qZA()(),e.TgZ(442,"figure",3),e._UZ(443,"mb-frequency-response-chart",17)(444,"mb-frequency-response-chart",17),e.TgZ(445,"figcaption"),e._uU(446,"An amplitude as a function of a normalized frequency of a cycle for even (a) and odd (b) TRIMA length."),e.qZA()(),e.TgZ(447,"figure",3),e._UZ(448,"mb-frequency-response-chart",15)(449,"mb-frequency-response-chart",15),e.TgZ(450,"figcaption"),e._uU(451,"A phase as a function of a period of a wave for even (a) and odd (b) TRIMA length."),e.qZA()(),e.TgZ(452,"figure",3),e._UZ(453,"mb-frequency-response-chart",17)(454,"mb-frequency-response-chart",17),e.TgZ(455,"figcaption"),e._uU(456,"A phase as a function of a normalized frequency of a wave for even (a) and odd (b) TRIMA length."),e.qZA()(),e._UZ(457,"p")),2&a&&(e.xp6(1),e.Oqu(i.trimaNote.title),e.xp6(1),e.Q6J("color","primary")("ngModel",i.unLocked),e.xp6(5),e.Q6J("configuration",i.configuration),e.xp6(1),e.Q6J("ngIf",i.unlocked),e.xp6(2),e.hij("",i.dataSelection.description,". "),e.xp6(1),e.Q6J("ngIf",i.dataSelection.url),e.xp6(5),e.Q6J("scaleToContainer",!0),e.xp6(2),e.Q6J("scaleToContainer",!0),e.xp6(2),e.Q6J("scaleToContainer",!0),e.xp6(12),e.Oqu("x_{1},\\, x_{2},\\, x_{3},\\,\\ldots\\,,\\, x_{k}"),e.xp6(3),e.Oqu("x_{k}"),e.xp6(6),e.Oqu("\\tag*{(1)}trima_{k}=\\frac{\\displaystyle \\sum_{m=1}^{L}w_{m}x_{k-L+m}}{\\displaystyle \\sum_{m=1}^{L}w_{m}}"),e.xp6(11),e.MGl("href","/",i.smaNote.route,"",e.LSH),e.xp6(12),e.hij(" ","\\tag*{(2)}w_{m}=\\begin{cases}L=2l\\ \\text{(even):}\\\\m, & 1\\le m\\le l\\\\L+1-m, & l\\lt m\\le L\\\\ \\\\L=2l+1\\ \\text{(odd):}\\\\m, & 1\\le m\\le l+1\\\\L+1-m, & l+1\\lt m\\le L\\end{cases}"," "),e.xp6(8),e.Oqu("\\tag*{}a_n=a_{n-1}+d,\\ d=const"),e.xp6(3),e.Oqu("\\tag*{}s_n=a_1+(a_1+d)+\\dots +(a_1+(n-1)d)"),e.xp6(3),e.Oqu("\\tag*{}s_n=a_n+(a_n-d)+\\dots +(a_n-(n-1)d)"),e.xp6(3),e.Oqu("\\tag*{}s_n=\\frac{n}{2}(a_1+a_n)"),e.xp6(6),e.Oqu("\\tag*{}\\sum_{m=1}^{L}w_{m}=\\sum_{m=1}^{l}m+\\sum_{m=l+1}^{2l}(2l+1-m)"),e.xp6(2),e.Oqu("\\tag*{}=\\sum_{m=1}^{l}m+l(2l+1)-\\sum_{m=l+1}^{2l}m"),e.xp6(2),e.Oqu("\\tag*{}=\\frac{l}{2}(1+l)+l(2l+1)-\\frac{l}{2}(l+1+2l)"),e.xp6(2),e.Oqu("\\tag*{}=\\frac{l}{2}(1+l+4l+2-3l-1)"),e.xp6(2),e.Oqu("\\tag*{}=\\frac{l}{2}(2l+2)=l(l+1)"),e.xp6(2),e.Oqu("\\tag*{(3)}=\\frac{1}{4}L(L+2)"),e.xp6(6),e.Oqu("\\tag*{}\\sum_{m=1}^{L}w_{m}=\\sum_{m=1}^{l+1}m+\\sum_{m=l+2}^{2l+1}(2l+1-m)"),e.xp6(2),e.Oqu("\\tag*{}=\\sum_{m=1}^{l+1}m+l(2l+1)-\\sum_{m=l+2}^{2l+1}m"),e.xp6(2),e.Oqu("\\tag*{}=\\frac{l+1}{2}(l+2)+l(2l+2)-\\frac{l}{2}(3l+3)"),e.xp6(2),e.Oqu("\\tag*{}=\\frac{l+1}{2}(l+2+4l-3l)"),e.xp6(2),e.Oqu("\\tag*{}=\\frac{l+1}{2}(2l+2)=(l+1)^2"),e.xp6(2),e.Oqu("\\tag*{(4)}=\\frac{1}{4}(L+1)^2"),e.xp6(6),e.hij(" ","\\tag*{(5)}trima_{k}=\\begin{cases}L=2l\\ \\text{(even):}\\\\ \\displaystyle \\frac{4}{L(L+2)}\\left[\\sum_{m=1}^{l}mx_{k-L+m}+\\sum_{m=l+1}^{L}(L+1-m)x_{k-L+m}\\right]\\\\ \\\\L=2l+1\\ \\text{(odd):}\\\\ \\displaystyle \\frac{4}{(L+1)^2}\\left[\\sum_{m=1}^{l+1}mx_{k-L+m}+\\sum_{m=l+2}^{L}(L+1-m)x_{k-L+m}\\right]\\end{cases}"," "),e.xp6(3),e.Oqu("L"),e.xp6(5),e.hij(" ","\\tag*{(6)}trima(x,L)=\\begin{cases}L=2l\\ \\text{(even):}\\\\ \\displaystyle sma\\left(sma(x,\\frac{L}{2}),\\frac{L}{2}+1\\right)\\\\ \\\\L=2l+1\\ \\text{(odd):}\\\\ \\displaystyle sma\\left(sma(x,\\frac{L+1}{2}),\\frac{L+1}{2}\\right)\\end{cases}"," "),e.xp6(4),e.Q6J("scaleToContainer",!0),e.xp6(2),e.Q6J("scaleToContainer",!0),e.xp6(7),e.Oqu("m"),e.xp6(3),e.Oqu("w"),e.xp6(8),e.Oqu("L"),e.xp6(4),e.Q6J("configuration",i.configurationStepUp),e.xp6(4),e.Q6J("configuration",i.configurationStepDn),e.xp6(11),e.Oqu("2"),e.xp6(3),e.Oqu("1"),e.xp6(3),e.Oqu("-1"),e.xp6(2),e.MGl("href","/",i.froaiNote.route,"",e.LSH),e.xp6(1),e.Oqu(i.froaiNote.title),e.xp6(5),e.Oqu("\\tau"),e.xp6(3),e.Oqu("\\nu"),e.xp6(3),e.Oqu("\\tau = \\frac{1}{\\nu}"),e.xp6(3),e.Oqu("\\tau = 2"),e.xp6(3),e.Oqu("\\nu = \\frac{1}{\\tau} = \\frac{1}{2}"),e.xp6(3),e.Oqu("1"),e.xp6(3),e.Oqu("0"),e.xp6(3),e.Oqu("\\tau"),e.xp6(3),e.Oqu("1"),e.xp6(3),e.Oqu("\\tau = 2"),e.xp6(4),e.Q6J("subfig","(a)")("width","100%")("height",i.freqsH)("ymode","amplitudePct")("xmode","period")("maxPeriod",i.maxPeriod)("data",i.freqs)("settingsPanelVisible",i.unlocked),e.xp6(1),e.Q6J("subfig","(b)")("width","100%")("height",i.freqsH)("ymode","phaseDegUnwrapped")("xmode","period")("maxPeriod",i.maxPeriod)("data",i.freqs)("settingsPanelVisible",i.unlocked),e.xp6(1),e.Q6J("ngIf",i.unlocked),e.xp6(7),e.Oqu("L"),e.xp6(3),e.Oqu("L_{inner}"),e.xp6(3),e.Oqu("L_{outer}"),e.xp6(3),e.Oqu("\\tau = 2"),e.xp6(3),e.Oqu("L_{inner}"),e.xp6(3),e.Oqu("L_{outer}"),e.xp6(7),e.Oqu("L"),e.xp6(3),e.Oqu("l"),e.xp6(3),e.Oqu("L_{inner}"),e.xp6(3),e.Oqu("L_{outer}"),e.xp6(3),e.Oqu("dB, \\tau = 2"),e.xp6(3),e.Oqu("poles, \\tau"),e.xp6(177),e.Q6J("subfig","(a)")("width","100%")("height",200)("ymode","amplitudePct")("xmode","period")("maxPeriod",15)("data",e.kEZ(145,_,i.trima2,i.trima4,i.trima6))("settingsPanelVisible",i.unlocked),e.xp6(1),e.Q6J("subfig","(b)")("width","100%")("height",200)("ymode","amplitudePct")("xmode","period")("maxPeriod",15)("data",e.kEZ(149,_,i.trima3,i.trima5,i.trima7))("settingsPanelVisible",i.unlocked),e.xp6(4),e.Q6J("subfig","(a)")("width","100%")("height",200)("ymode","amplitudePct")("xmode","frequency")("data",e.kEZ(153,_,i.trima2,i.trima4,i.trima6))("settingsPanelVisible",i.unlocked),e.xp6(1),e.Q6J("subfig","(b)")("width","100%")("height",200)("ymode","amplitudePct")("xmode","frequency")("data",e.kEZ(157,_,i.trima3,i.trima5,i.trima7))("settingsPanelVisible",i.unlocked),e.xp6(4),e.Q6J("subfig","(a)")("width","100%")("height",200)("ymode","phaseDegUnwrapped")("xmode","period")("maxPeriod",15)("data",e.WLB(161,Z,i.trima2,i.trima4))("settingsPanelVisible",i.unlocked),e.xp6(1),e.Q6J("subfig","(b)")("width","100%")("height",200)("ymode","phaseDegUnwrapped")("xmode","period")("maxPeriod",15)("data",e.WLB(164,Z,i.trima3,i.trima5))("settingsPanelVisible",i.unlocked),e.xp6(4),e.Q6J("subfig","(a)")("width","100%")("height",200)("ymode","phaseDegUnwrapped")("xmode","frequency")("data",e.WLB(167,Z,i.trima2,i.trima4))("settingsPanelVisible",i.unlocked),e.xp6(1),e.Q6J("subfig","(b)")("width","100%")("height",200)("ymode","phaseDegUnwrapped")("xmode","frequency")("data",e.WLB(170,Z,i.trima3,i.trima5))("settingsPanelVisible",i.unlocked))},dependencies:[h.O5,d.Fj,d.wV,d.JJ,d.qQ,d.Fd,d.On,q.KE,q.hX,x.Nt,c.Hw,p.ib,p.yz,p.yK,w.Rr,s.GJY,s.JJg,s.mg9,s.kDz,s.T1Q,S.h,s.y29,H],styles:['.ohlcv-chart-study[_ngcontent-%COMP%]{margin:0;padding:0}.button[_ngcontent-%COMP%]{margin-right:8px}.slide-toggle[_ngcontent-%COMP%]{float:right;margin:0 8px 0 0}.icon[_ngcontent-%COMP%]{vertical-align:bottom}body[_ngcontent-%COMP%]{counter-reset:cntTable}table[_ngcontent-%COMP%]{border-collapse:collapse;counter-increment:cntTable;display:table;margin:1em 1.2em .5em 0}.tablecaption[_ngcontent-%COMP%]:before{content:"Table " counter(cntTable) ".";font-weight:700;padding-right:.5em}tr[_ngcontent-%COMP%]{text-align:left;text-align:start}td[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], thead[_ngcontent-%COMP%]{border:thin solid;padding:.2em}'],changeDetection:0})}return n})()},{path:"**",redirectTo:""}];let E=(()=>{class n{static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({imports:[v.Bz.forChild(G),v.Bz]})}return n})(),j=(()=>{class n{static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({imports:[h.ez,d.u5,q.lN,x.c,U.ot,c.Ps,p.To,w.rP,O.N6,s.Fd9,s.hXN,s.ylR,s.U8i,s._km,s.nUT,s.jkk,I.S,s.feT,E]})}return n})()}}]);