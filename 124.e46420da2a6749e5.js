"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[124],{9124:(X,I,l)=>{l.r(I),l.d(I,{EmaModule:()=>Q});var d=l(1368),h=l(6504),C=l(768),_=l(7536),O=l(7816),g=l(1560),u=l(4168),Y=l(7760),S=l(6232),o=l(7868),q=l(1416),G=l(2992),R=l(4468),e=l(4496),M=l(832);function N(i,m){if(1&i){const t=e.KQA();e.I0R(0,"mb-line-style-selector",3),e.qCj("selectionChange",function(a){e.usT(t);const s=e.GaO();return e.CGJ(s.updateStyle(a))}),e.C$Y()}if(2&i){const t=e.GaO();e.E7m("initial",t.current.style)("label","Line")}}let F=(()=>{class i{constructor(){this.removed=new e._w7,this.changed=new e._w7}set initial(t){this.current=t}updateStyle(t){this.current.style=t,this.changed.emit(this.current)}updateParams(t){this.current.params=t,this.changed.emit(this.current)}remove(){this.removed.emit(this.current)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.In1({type:i,selectors:[["app-ema-params"]],inputs:{initial:"initial"},outputs:{removed:"removed",changed:"changed"},decls:6,vars:2,consts:[["mat-icon-button","","color","warn",3,"click"],[3,"initial","selectionChange"],[3,"initial","label","selectionChange",4,"ngIf"],[3,"initial","label","selectionChange"]],template:function(n,a){1&n&&(e.I0R(0,"div")(1,"button",0),e.qCj("click",function(){return a.remove()}),e.I0R(2,"mat-icon"),e.OEk(3,"delete"),e.C$Y()(),e.I0R(4,"mb-exponential-moving-average-params",1),e.qCj("selectionChange",function(r){return a.updateParams(r)}),e.C$Y(),e.yuY(5,N,1,2,"mb-line-style-selector",2),e.C$Y()),2&n&&(e.yG2(4),e.E7m("initial",a.current.params),e.yG2(),e.E7m("ngIf",a.current.showStyle))},dependencies:[d.u_,O.um,g.qL,o.CqK,o.Wou],changeDetection:0})}return i})();function P(i,m){if(1&i){const t=e.KQA();e.I0R(0,"app-ema-params",2),e.qCj("changed",function(a){e.usT(t);const s=e.GaO();return e.CGJ(s.updated(a))})("removed",function(a){e.usT(t);const s=e.GaO();return e.CGJ(s.removed(a))}),e.C$Y()}2&i&&e.E7m("initial",m.$implicit)}const $=()=>{const i=new o.AtK;return i.color="",i.width=1.5,i.dash="",i.interpolation="camullRom",i},v=(i,m,t,n)=>({params:{length:m,firstIsAverage:t,barComponent:n},style:$(),showStyle:i}),L=(i,m,t)=>({params:{smoothingFactor:m,barComponent:t},style:$(),showStyle:i});let z=(()=>{class i{constructor(){this.changed=new e._w7,this.emaArray=[],this.colorArray=["#ff0000"],this.initialized=!1}set initialLength(t){const n=[];for(let a=0;a<t.length.length;a++){const s=v(t.showStyle,t.length[a],t.firstIsAverage,t.barComponent);s.style.color=this.colorArray[a%this.colorArray.length],n.push(s)}this.emaArray=n,this.defaultBarComponent=t.barComponent}set initialSmoothingFactor(t){const n=[];for(let a=0;a<t.smoothingFactor.length;a++){const s=L(t.showStyle,t.smoothingFactor[a],t.barComponent);s.style.color=this.colorArray[a%this.colorArray.length],n.push(s)}this.emaArray=n,this.defaultBarComponent=t.barComponent}set colors(t){if(t&&t.length>0){const n=[];this.colorArray=t;for(let a=0;a<this.emaArray.length;a++){const s={...this.emaArray[a]};s.style.color=t[a%t.length],n.push(s)}this.emaArray=n}}ngAfterViewInit(){this.initialized=!0,this.changed.emit(this.emaArray)}add(){const t=this.getShowStyle(),n=v(t,this.getLastLength()+5,!0,this.defaultBarComponent);t&&(n.style.color=this.colorArray[this.emaArray.length%this.colorArray.length]),this.emaArray.push(n),this.emaArray=[...this.emaArray],this.notify()}updated(t){this.getIndex(t)>=0&&this.notify()}removed(t){const n=this.getIndex(t);n>=0&&(this.emaArray.splice(n,1),this.emaArray=[...this.emaArray],this.notify())}getLastLength(){const t=this.emaArray.length-1;return t<0?0:(i=>"length"in i)(this.emaArray[t].params)?this.emaArray[t].params.length:Math.ceil(2/this.emaArray[t].params.smoothingFactor-1)}getShowStyle(){return!(this.emaArray.length<=0)&&this.emaArray[0].showStyle}getIndex(t){for(let n=0;n<this.emaArray.length;n++)if(this.emaArray[n]===t)return n;return-1}notify(){this.initialized&&this.changed.emit(this.emaArray)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.In1({type:i,selectors:[["app-ema-list"]],inputs:{initialLength:"initialLength",initialSmoothingFactor:"initialSmoothingFactor",colors:"colors"},outputs:{changed:"changed"},decls:5,vars:1,consts:[[3,"initial","changed","removed",4,"ngFor","ngForOf"],["mat-mini-fab","","color","primary",3,"click"],[3,"initial","changed","removed"]],template:function(n,a){1&n&&(e.yuY(0,P,1,1,"app-ema-params",0),e.I0R(1,"div")(2,"button",1),e.qCj("click",function(){return a.add()}),e.I0R(3,"mat-icon"),e.OEk(4,"add"),e.C$Y()()()),2&n&&e.E7m("ngForOf",a.emaArray)},dependencies:[d.ay,O.CI,g.qL,F]})}return i})();function D(i,m){if(1&i){const t=e.KQA();e.I0R(0,"mat-expansion-panel",17)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),e.OEk(4,"tune"),e.C$Y()()(),e.I0R(5,"mb-swatches-select",18),e.qCj("selectionChange",function(a){e.usT(t);const s=e.GaO();return e.CGJ(s.indicatorPaletteChanged(a))}),e.C$Y(),e.I0R(6,"app-ema-list",19),e.qCj("changed",function(a){e.usT(t);const s=e.GaO();return e.CGJ(s.indicatorsChanged(a))}),e.C$Y()()}if(2&i){const t=e.GaO();e.yG2(5),e.E7m("selected",t.selectedIndex)("colors",t.palettes)("label","Palette"),e.yG2(),e.E7m("initialLength",t.initialIndicators)("colors",t.selectedPalette)}}function H(i,m){if(1&i&&(e.I0R(0,"span")(1,"a",20),e.OEk(2),e.C$Y()()),2&i){const t=e.GaO();e.yG2(),e._6D("href",t.dataSelection.url,e.K6U),e.yG2(),e.cNF(t.dataSelection.urlName)}}function K(i,m){if(1&i){const t=e.KQA();e.I0R(0,"mat-expansion-panel",17)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),e.OEk(4,"tune"),e.C$Y()()(),e.I0R(5,"mat-form-field",21)(6,"mat-label"),e.OEk(7,"Max period to display"),e.C$Y(),e.I0R(8,"input",22),e.iHE("ngModelChange",function(a){e.usT(t);const s=e.GaO();return e.kNx(s.maxPeriod,a)||(s.maxPeriod=a),e.CGJ(a)}),e.C$Y()(),e.I0R(9,"mat-form-field",21)(10,"mat-label"),e.OEk(11,"Height"),e.C$Y(),e.I0R(12,"input",23),e.iHE("ngModelChange",function(a){e.usT(t);const s=e.GaO();return e.kNx(s.freqsH,a)||(s.freqsH=a),e.CGJ(a)}),e.C$Y()(),e.I0R(13,"app-ema-list",24),e.qCj("changed",function(a){e.usT(t);const s=e.GaO();return e.CGJ(s.freqsChanged(a))}),e.C$Y()()}if(2&i){const t=e.GaO();e.yG2(8),e.OKB("ngModel",t.maxPeriod),e.yG2(4),e.OKB("ngModel",t.freqsH),e.yG2(),e.E7m("initialLength",t.initialFreqs)}}const f=(i,m,t,n)=>[i,m,t,n],p=4096,U=i=>"length"in i,J=(i,m,t)=>{const n=[],a=(0,o._Ir)(t);for(const s of i)n.push({time:s.time,value:m.update(a(s))});return n},Z=(i,m,t)=>{const n=(0,o._Ir)(t),a=n(i[0]);for(;!m.isPrimed;)m.update(a);const s=[];for(const r of i)s.push({time:r.time,value:m.update(n(r))});return s},j=[{path:"",component:(()=>{class i{constructor(){this.indicators=[],this.initialized=!1,this.selectedIndex=0,this.initialIndicators={length:[5,10,20],firstIsAverage:!1,barComponent:o.K2r.Median,showStyle:!0},this.initialFreqs={length:[5,10,20],firstIsAverage:!1,showStyle:!1},this.palettes=(0,o.cp0)(this.initialIndicators.length.length),this.selectedPalette=this.palettes[this.selectedIndex],this.smaNote=R.qY,this.emaNote=R.L8,this.froaiNote=R.q2,this.freqs=[],this.freqsMaxPeriod=40,this.freqsHeight=300,this.unlocked=!0,this.dataStepUp=(0,o.uWm)(10,32,90,96,1),this.dataStepDn=(0,o.uWm)(90,32,10,96,1),this.ema2=o.O6v.calculate(p,new o.oNR({length:2,firstIsAverage:!1}),4),this.ema5=o.O6v.calculate(p,new o.oNR({length:5,firstIsAverage:!1}),10),this.ema10=o.O6v.calculate(p,new o.oNR({length:10,firstIsAverage:!1}),20),this.ema20=o.O6v.calculate(p,new o.oNR({length:20,firstIsAverage:!1}),40)}get maxPeriod(){return this.freqsMaxPeriod}set maxPeriod(t){(!t||t<2)&&(t=2),this.freqsMaxPeriod=t,this.freqs.length>0&&(this.freqs=[...this.freqs])}get freqsH(){return this.freqsHeight}set freqsH(t){this.freqsHeight=t,this.freqs.length>0&&(this.freqs=[...this.freqs])}get unLocked(){return this.unlocked}set unLocked(t){this.unlocked=t,this.render()}ngAfterViewInit(){this.initialized=!0,this.unlocked=!1,this.render()}indicatorPaletteChanged(t){this.selectedIndex=this.palettes.indexOf(t),this.selectedPalette=t}indicatorsChanged(t){const n=t.length>2?t.length:2;n!==this.selectedPalette.length&&(this.palettes=(0,o.cp0)(n),this.selectedIndex>=n&&(this.selectedIndex=0),this.selectedPalette=this.palettes[this.selectedIndex]),this.indicators=t,this.render()}freqsChanged(t){const n=[];for(const a of t)if(U(a.params)){const s=a.params,r=o.O6v.calculate(p,new o.oNR({length:s.length,firstIsAverage:s.firstIsAverage}),2*s.length);n.push(r)}else{const s=a.params,r=Math.ceil(2/s.smoothingFactor-1),y=o.O6v.calculate(p,new o.oNR({smoothingFactor:s.smoothingFactor}),2*r);n.push(y)}this.freqs=n}dataSelectionChanged(t){this.dataSelection=t,this.render()}render(){this.initialized&&(this.configuration=this.prepareConfig(this.dataSelection.mnemonic,this.dataSelection.data,!1),this.configurationStepUp=this.prepareConfig("",this.dataStepUp,!0),this.configurationStepDn=this.prepareConfig("",this.dataStepDn,!0))}prepareConfig(t,n,a){const s={width:"100%",widthMin:360,navigationPane:{height:30,heightMin:30,heightMax:30,hasLine:!1,hasArea:!0,hasTimeAxis:!1,timeTicks:0},heightNavigationPane:30,timeAnnotationFormat:"%Y-%m-%d",axisLeft:!0,axisRight:!1,margin:{left:0,top:10,right:20,bottom:0},ohlcv:{name:"",data:[],candlesticks:!1},pricePane:{height:"30%",heightMin:300,heightMax:800,valueMarginPercentageFactor:.01,valueFormat:",.2f",bands:[],lineAreas:[],horizontals:[],arrows:[],lines:[]},indicatorPanes:[],crosshair:!1,volumeInPricePane:!1,menuVisible:!0,downloadSvgVisible:!0};s.menuVisible=this.unlocked,s.ohlcv.name=t,s.ohlcv.data=n;for(const r of this.indicators){const y=r.params.barComponent?r.params.barComponent:o.K2r.Close,b=new o.oNR(r.params),c=new o.mcC;c.name=b.getMnemonic(),c.data=a?Z(n,b,y):J(n,b,y);const E=r.style;c.color=E.color,c.width=E.width,c.dash=E.dash,c.interpolation=E.interpolation,s.pricePane.lines.push(c)}return s}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.In1({type:i,selectors:[["app-ind-ema"]],decls:317,vars:164,consts:[[1,"slide-toggle",3,"color","ngModel","ngModelChange"],[1,"icon"],["label","",3,"selectionChange"],[1,"figwide"],[1,"ohlcv-chart-study",3,"configuration"],["expanded","false","style","margin-bottom: 1em;",4,"ngIf"],[4,"ngIf"],[2,"width","100%"],[3,"href"],[3,"subfig","width","height","ymode","xmode","maxPeriod","data","settingsPanelVisible"],[3,"subfig","width","height","ymode","xmode","maxPeriod","minDeg","maxDeg","data","settingsPanelVisible"],[3,"subfig","width","height","ymode","xmode","data","settingsPanelVisible"],[3,"subfig","width","height","ymode","xmode","minDeg","maxDeg","data","settingsPanelVisible"],[1,"counter-skip"],["href","https://books.google.com/books?id=JokQD5nK4LMC","target","_blank"],["href","https://books.google.com/books?id=18fICgAAQBAJ","target","_blank"],["href","https://books.google.com/books?id=EaMuAAAAQBAJ","target","_blank"],["expanded","false",2,"margin-bottom","1em"],[2,"vertical-align","bottom",3,"selected","colors","label","selectionChange"],[3,"initialLength","colors","changed"],["target","_blank",3,"href"],["appearance","fill"],["matInput","","type","number","min","8","max","1024","step","1",3,"ngModel","ngModelChange"],["matInput","","type","number","min","100","max","1024","step","1",3,"ngModel","ngModelChange"],[3,"initialLength","changed"]],template:function(n,a){1&n&&(e.I0R(0,"h1"),e.OEk(1),e.C$Y(),e.I0R(2,"mat-slide-toggle",0),e.iHE("ngModelChange",function(r){return e.kNx(a.unLocked,r)||(a.unLocked=r),r}),e.I0R(3,"mat-icon",1),e.OEk(4,"tune"),e.C$Y()(),e.I0R(5,"app-bar-series-select",2),e.qCj("selectionChange",function(r){return a.dataSelectionChanged(r)}),e.C$Y(),e.I0R(6,"figure",3),e.wR5(7,"mb-ohlcv-chart",4),e.yuY(8,D,7,5,"mat-expansion-panel",5),e.I0R(9,"figcaption"),e.OEk(10),e.yuY(11,H,3,2,"span",6),e.C$Y()(),e.wR5(12,"p"),e.I0R(13,"div",7),e.OEk(14," An Exponential Moving Average (EMA), or Exponentially Weighted Moving Average (EWMA) in academic parlance, is defined recursively as "),e.I0R(15,"mb-kd"),e.OEk(16),e.C$Y(),e.OEk(17," The parameter "),e.I0R(18,"mb-ki"),e.OEk(19),e.C$Y(),e.OEk(20,", "),e.I0R(21,"mb-ki"),e.OEk(22),e.C$Y(),e.OEk(23,", determines the aggressiveness of the EMA. As "),e.I0R(24,"mb-ki"),e.OEk(25),e.C$Y(),e.OEk(26,", the last sample makes no impact, making the EMA line appear smoother. As "),e.I0R(27,"mb-ki"),e.OEk(28),e.C$Y(),e.OEk(29,", only the last sample determines the EMA value, so the input samples just pass through the filter. "),e.wR5(30,"p"),e.OEk(31," In contrast with the "),e.I0R(32,"a",8),e.OEk(33,"Simple Moving Average"),e.C$Y(),e.OEk(34,", the EMA uses all historical samples, giving them the smaller and smaller weighting factors. This becomes obvious if we re-write equation (1) as "),e.I0R(35,"mb-kd"),e.OEk(36),e.C$Y(),e.I0R(37,"mb-kd"),e.OEk(38),e.C$Y(),e.OEk(39," Sometimes, instead of "),e.I0R(40,"mb-ki"),e.OEk(41),e.C$Y(),e.OEk(42,", it is convenient to use and equivalent length "),e.I0R(43,"mb-ki"),e.OEk(44),e.C$Y(),e.OEk(45," of the SMA of the same smoothness, which is related to "),e.I0R(46,"mb-ki"),e.OEk(47),e.C$Y(),e.OEk(48," as "),e.I0R(49,"mb-kd"),e.OEk(50),e.C$Y(),e.OEk(51," As "),e.I0R(52,"mb-ki"),e.OEk(53),e.C$Y(),e.OEk(54,", "),e.I0R(55,"mb-ki"),e.OEk(56),e.C$Y(),e.OEk(57," becomes infinite, as "),e.I0R(58,"mb-ki"),e.OEk(59),e.C$Y(),e.OEk(60,", "),e.I0R(61,"mb-ki"),e.OEk(62),e.C$Y(),e.OEk(63," becomes one. The equation (2) can be written in terms of "),e.I0R(64,"mb-ki"),e.OEk(65),e.C$Y(),e.OEk(66," as "),e.I0R(67,"mb-kd"),e.OEk(68),e.C$Y(),e.OEk(69," From the digital signal processing (DSP) point of view, the EMA is an infinite impulse response (IIR) filter wich applies exponentially decresing weighting factors to the input samples. "),e.wR5(70,"p"),e.C$Y(),e.I0R(71,"h2"),e.OEk(72,"Step response"),e.C$Y(),e.I0R(73,"div",7),e.OEk(74," Two figures below demonstrate the response to the step-up and step-down data. The transition is clearly not linear. The step-up response doesn't overshoot and the step-down response doesn't undershoot the data.\n"),e.C$Y(),e.I0R(75,"figure",3),e.wR5(76,"mb-ohlcv-chart",4),e.I0R(77,"figcaption"),e.OEk(78,"Step-up response."),e.C$Y()(),e.I0R(79,"figure",3),e.wR5(80,"mb-ohlcv-chart",4),e.I0R(81,"figcaption"),e.OEk(82,"Step-down response."),e.C$Y()(),e.wR5(83,"p"),e.I0R(84,"div",7),e.OEk(85," The step response of the EMA can be derived analytically.\nIt is the output of the EMA when a Heaviside step function (Oppenheim et al., 2009, p.13)\n"),e.I0R(86,"mb-kd"),e.OEk(87),e.C$Y(),e.OEk(88,"\nis applied as an input. Using equation (2),\n"),e.I0R(89,"mb-kd"),e.OEk(90),e.C$Y(),e.I0R(91,"mb-kd"),e.OEk(92),e.C$Y(),e.OEk(93,"\nTo simplify the expression above, we can recall a sum of geometric series\n"),e.I0R(94,"mb-kd"),e.OEk(95),e.C$Y(),e.OEk(96,"\nMultiplying both sides by "),e.I0R(97,"mb-ki"),e.OEk(98),e.C$Y(),e.OEk(99," and simplifying\n"),e.I0R(100,"mb-kd"),e.OEk(101),e.C$Y(),e.I0R(102,"mb-kd"),e.OEk(103),e.C$Y(),e.I0R(104,"mb-kd"),e.OEk(105),e.C$Y(),e.OEk(106,"\ngives a well-known identity for a sum of geometric series (Jeffrey and Dai, 2008, 1.2.2.2):\n"),e.I0R(107,"mb-kd"),e.OEk(108),e.C$Y(),e.OEk(109,"\nSubstituting the sum of geometric series into equaton (5) gives\n"),e.I0R(110,"mb-kd"),e.OEk(111),e.C$Y(),e.I0R(112,"mb-kd"),e.OEk(113),e.C$Y(),e.I0R(114,"mb-kd"),e.OEk(115),e.C$Y(),e.wR5(116,"p"),e.OEk(117," The unit impulse response "),e.I0R(118,"mb-ki"),e.OEk(119),e.C$Y(),e.OEk(120," of the EMA is the output of the EMA when a Kronecker delta function\n"),e.I0R(121,"mb-kd"),e.OEk(122),e.C$Y(),e.OEk(123,"\nis applied to the input. Using the equation (2), we get\n"),e.I0R(124,"mb-kd"),e.OEk(125),e.C$Y(),e.I0R(126,"mb-kd"),e.OEk(127),e.C$Y(),e.I0R(128,"mb-kd"),e.OEk(129),e.C$Y(),e.wR5(130,"p"),e.C$Y(),e.I0R(131,"h2"),e.OEk(132,"Frequency response"),e.C$Y(),e.I0R(133,"div",7),e.OEk(134," The figures below show an amplitude and a phase lag of the unit sample response of the EMA as a function of a period of various signal frequencies. "),e.wR5(135,"p"),e.OEk(136," A period is a duration of a cycle in samples. The smallest possible period of a cycle is "),e.I0R(137,"mb-ki"),e.OEk(138),e.C$Y(),e.OEk(139," samples. To understand this, imagine a cycle of a sinusoid which starts at zero, goes up and peaks at "),e.I0R(140,"mb-ki"),e.OEk(141),e.C$Y(),e.OEk(142,", continues down and bottoms at "),e.I0R(143,"mb-ki"),e.OEk(144),e.C$Y(),e.OEk(145,", and then returns back to zero. We need at least two samples (peak and through) to represent a cycle. See more details in the "),e.I0R(146,"a",8),e.OEk(147),e.C$Y(),e.OEk(148,". "),e.wR5(149,"p"),e.C$Y(),e.I0R(150,"figure",3),e.wR5(151,"mb-frequency-response-chart",9)(152,"mb-frequency-response-chart",10),e.yuY(153,K,14,3,"mat-expansion-panel",5),e.I0R(154,"figcaption"),e.OEk(155,"An amplitude (a) and a phase lag (b) as a function of a period of a cycle."),e.C$Y()(),e.wR5(156,"p"),e.I0R(157,"div",7),e.OEk(158," The same charts can be represented as a function of a cycle's frequency. A period ("),e.I0R(159,"mb-ki"),e.OEk(160),e.C$Y(),e.OEk(161,") is an inverse of the cycle's frequency ("),e.I0R(162,"mb-ki"),e.OEk(163),e.C$Y(),e.OEk(164,"): "),e.I0R(165,"mb-ki"),e.OEk(166),e.C$Y(),e.OEk(167,". The smallest period "),e.I0R(168,"mb-ki"),e.OEk(169),e.C$Y(),e.OEk(170," corresponds to the Nyquist frequency "),e.I0R(171,"mb-ki"),e.OEk(172),e.C$Y(),e.OEk(173,"which is the highest frequency possible in a signal. Below we use the normalized frequency which has the value of "),e.I0R(174,"mb-ki"),e.OEk(175),e.C$Y(),e.OEk(176," at the Nyquist frequency. That is, "),e.I0R(177,"mb-ki"),e.OEk(178),e.C$Y(),e.OEk(179," corresponds to the infinite "),e.I0R(180,"mb-ki"),e.OEk(181),e.C$Y(),e.OEk(182,", "),e.I0R(183,"mb-ki"),e.OEk(184),e.C$Y(),e.OEk(185," corresponds to the "),e.I0R(186,"mb-ki"),e.OEk(187),e.C$Y(),e.OEk(188,". "),e.wR5(189,"p"),e.C$Y(),e.I0R(190,"figure",3),e.wR5(191,"mb-frequency-response-chart",9)(192,"mb-frequency-response-chart",11),e.I0R(193,"figcaption"),e.OEk(194,"An amplitude as a function of a period of a cycle (a) and as a function of a normalized frequency of a cycle (b) for various EMA lengths."),e.C$Y()(),e.I0R(195,"figure",3),e.wR5(196,"mb-frequency-response-chart",10)(197,"mb-frequency-response-chart",12),e.I0R(198,"figcaption"),e.OEk(199,"A phase as a function of a period of a wave (a) and as a function of a normalized frequency of a wave for various EMA lengths."),e.C$Y()(),e.wR5(200,"p"),e.I0R(201,"div",7),e.OEk(202," The frequency response of the EMA can be derived analytically from the transfer function of the EMA.\nThe transfer function is defined using the unilateral Z-transform (Oppenheim et al., 2009, p.99)\n"),e.I0R(203,"mb-kd"),e.OEk(204),e.C$Y(),e.OEk(205,"\nwhere "),e.I0R(206,"mb-ki"),e.OEk(207),e.C$Y(),e.OEk(208," is a complex variable. If "),e.I0R(209,"mb-kd"),e.OEk(210),e.C$Y(),e.OEk(211,"\nare Z-transforms of the input "),e.I0R(212,"mb-ki"),e.OEk(213),e.C$Y(),e.OEk(214," and the output "),e.I0R(215,"mb-ki"),e.OEk(216),e.C$Y(),e.OEk(217,"\nrespectively, then the transfer function (sometimes called system function) is defined as\n(Oppenheim et al., 2009, p.131)\n"),e.I0R(218,"mb-kd"),e.OEk(219),e.C$Y(),e.wR5(220,"p"),e.OEk(221,"\nApplying Z-transorm to the equation (1) and using the linearity and the translation (time shift)\nproperties of the Z-transform translation (Oppenheim et al., 2009, pp.124-125)\n"),e.I0R(222,"mb-kd"),e.OEk(223),e.C$Y(),e.I0R(224,"mb-kd"),e.OEk(225),e.C$Y(),e.OEk(226,"\nwe get:\n"),e.I0R(227,"mb-kd"),e.OEk(228),e.C$Y(),e.I0R(229,"mb-kd"),e.OEk(230),e.C$Y(),e.I0R(231,"mb-kd"),e.OEk(232),e.C$Y(),e.I0R(233,"mb-kd"),e.OEk(234),e.C$Y(),e.I0R(235,"mb-kd"),e.OEk(236),e.C$Y(),e.I0R(237,"mb-kd"),e.OEk(238),e.C$Y(),e.wR5(239,"p"),e.OEk(240,"\nThe frequency response function is the transfer function where z is located on the unit circle,\n"),e.I0R(241,"mb-ki"),e.OEk(242),e.C$Y(),e.OEk(243,". Here "),e.I0R(244,"mb-ki"),e.OEk(245),e.C$Y(),e.OEk(246," is an angular frequency\n(in radians per sample), "),e.I0R(247,"mb-ki"),e.OEk(248),e.C$Y(),e.OEk(249," is a frequency, and "),e.I0R(250,"mb-ki"),e.OEk(251),e.C$Y(),e.OEk(252,"\nis a period of a cycle in samples:\n"),e.I0R(253,"mb-kd"),e.OEk(254),e.C$Y(),e.OEk(255,"\nThen, the equation (8) becomes\n"),e.I0R(256,"mb-kd"),e.OEk(257),e.C$Y(),e.OEk(258,"\nLet's calculate the squared modulus of the "),e.I0R(259,"mb-ki"),e.OEk(260),e.C$Y(),e.OEk(261," using the Euler's formula\nfor writing the exponential as sines and cosines: "),e.I0R(262,"mb-ki"),e.OEk(263),e.C$Y(),e.OEk(264,".\n"),e.I0R(265,"mb-kd"),e.OEk(266),e.C$Y(),e.I0R(267,"mb-kd"),e.OEk(268),e.C$Y(),e.I0R(269,"mb-kd"),e.OEk(270),e.C$Y(),e.I0R(271,"mb-kd"),e.OEk(272),e.C$Y(),e.I0R(273,"mb-kd"),e.OEk(274),e.C$Y(),e.OEk(275,"\nand\n"),e.I0R(276,"mb-kd"),e.OEk(277),e.C$Y(),e.OEk(278," (Mak, 2006, p.15) mentions that the phase of the "),e.I0R(279,"mb-ki"),e.OEk(280),e.C$Y(),e.OEk(281," can be derived as\n"),e.I0R(282,"mb-kd"),e.OEk(283),e.C$Y(),e.OEk(284,"\nWe can also express the phase lag "),e.I0R(285,"mb-ki"),e.OEk(286),e.C$Y(),e.OEk(287," in the equation above\nin terms of a lag in a number of bars (data points)\n"),e.I0R(288,"mb-kd"),e.OEk(289),e.C$Y(),e.OEk(290,"\nI was not able to derive both equations (12) and (13), and (Mak, 2006, p.15) do not have the simplified\nformula for the equation (13).\n"),e.wR5(291,"p"),e.C$Y(),e.wR5(292,"div",7)(293,"hr"),e.I0R(294,"h2",13),e.OEk(295,"References"),e.C$Y(),e.I0R(296,"div"),e.OEk(297," Jeffrey, A., & Dai, H. H. (2008). "),e.I0R(298,"em"),e.OEk(299,"Handbook of mathematical formulas and integrals"),e.C$Y(),e.OEk(300,". (4th ed., p. 592). San Diego, CA: Elsevier/Academic Press. "),e.I0R(301,"a",14),e.OEk(302,"google books"),e.C$Y()(),e.I0R(303,"div"),e.OEk(304,"Mak, D. K. (2006). "),e.I0R(305,"em"),e.OEk(306,"Mathematical Techniques in Financial Market Trading"),e.C$Y(),e.OEk(307," (p. 320). doi:10.1142/6055 "),e.I0R(308,"a",15),e.OEk(309,"google books"),e.C$Y()(),e.I0R(310,"div"),e.OEk(311,"Oppenheim, A. V., Schafer, R. W., Yoder, M. A., & Padgett, W. T. (2009). "),e.I0R(312,"em"),e.OEk(313,"Discrete-time signal processing"),e.C$Y(),e.OEk(314,". (3rd ed., p. 1120). Upper Saddle River, NJ: Pearson. "),e.I0R(315,"a",16),e.OEk(316,"google books"),e.C$Y()()),2&n&&(e.yG2(),e.cNF(a.emaNote.title),e.yG2(),e.E7m("color","primary"),e.OKB("ngModel",a.unLocked),e.yG2(5),e.E7m("configuration",a.configuration),e.yG2(),e.E7m("ngIf",a.unlocked),e.yG2(2),e.oRS("",a.dataSelection.description,". "),e.yG2(),e.E7m("ngIf",a.dataSelection.url),e.yG2(5),e.oRS(" ","\\tag*{(1)}ema_{k}=\\alpha x_{k} + (1-\\alpha)ema_{k-1}"," "),e.yG2(3),e.cNF("\\alpha"),e.yG2(3),e.cNF("0\\lt\\alpha\\lt 1"),e.yG2(3),e.cNF("\\alpha \\rightarrow 0"),e.yG2(3),e.cNF("\\alpha \\rightarrow 1"),e.yG2(4),e.CI5("href","/",a.smaNote.route,"",e.K6U),e.yG2(4),e.oRS(" ","\\tag*{}ema_{k}=\\sum\\limits_{m=0}^{k}{\\alpha(1-\\alpha)^{m}x_{k-m}}"," "),e.yG2(2),e.oRS(" ","\\tag*{(2)}=\\alpha\\sum\\limits_{m=0}^{k}{(1-\\alpha)^{m}x_{k-m}}"," "),e.yG2(3),e.cNF("\\alpha"),e.yG2(3),e.cNF("L"),e.yG2(3),e.cNF("\\alpha"),e.yG2(3),e.oRS(" ","\\tag*{(3)} L=\\frac{2}{\\alpha}-1, \\qquad \\alpha=\\frac{2}{L+1}"," "),e.yG2(3),e.cNF("\\alpha \\rightarrow 0"),e.yG2(3),e.cNF("L"),e.yG2(3),e.cNF("\\alpha \\rightarrow 1"),e.yG2(3),e.cNF("L"),e.yG2(3),e.cNF("L"),e.yG2(3),e.oRS(" ","\\tag*{(4)}ema_{k}=\\frac{2}{L+1}\\sum\\limits_{m=0}^{k}{ \\left(\\frac{L-1}{L+1}\\right)^{m}x_{k-m}}"," "),e.yG2(8),e.E7m("configuration",a.configurationStepUp),e.yG2(4),e.E7m("configuration",a.configurationStepDn),e.yG2(7),e.oRS(" ","\\tag*{}H_{k} = \\begin{cases} 0, & k \\lt 0 \\\\ 1, & k \\ge 0 \\end{cases}","\n"),e.yG2(3),e.oRS(" ","\\tag*{}ema_{k}^{step}=\\alpha\\sum\\limits_{m=0}^{k-1}{(1-\\alpha)^{m}H_{k-m}}","\n"),e.yG2(2),e.oRS(" ","\\tag*{(5)}=\\alpha\\sum\\limits_{m=0}^{k-1}{(1-\\alpha)^{m}}","\n"),e.yG2(3),e.oRS(" ","\\tag*{}\\sum_{m=0}^{k-1}x^m = 1 + x + x^2 + \\ldots + x^{k-1}","\n"),e.yG2(3),e.cNF("1-x"),e.yG2(3),e.oRS(" ","\\tag*{}(1-x)\\sum_{m=0}^{k-1}x^m = (1-x)(1 + x + x^2 + \\ldots + x^{k-1})","\n"),e.yG2(2),e.oRS(" ","\\tag*{}= 1 + x + x^2 + \\ldots + x^{k-1} - x - x^2 - \\ldots - x^{k-1} - x^k","\n"),e.yG2(2),e.oRS(" ","\\tag*{}= 1 - x^k","\n"),e.yG2(3),e.oRS(" ","\\tag*{}\\sum_{m=0}^{k-1}x^m = \\begin{cases} (1-x^k)/(1-x), & x \\neq 1 \\\\ k, & x = 1 \\end{cases}","\n"),e.yG2(3),e.oRS(" ","\\tag*{}ema_{k}^{step}=\\alpha\\sum\\limits_{m=0}^{k-1}{(1-\\alpha)^{m}}","\n"),e.yG2(2),e.oRS(" ","\\tag*{}=\\alpha\\frac{1-(1-\\alpha)^k}{1-(1-\\alpha)}","\n"),e.yG2(2),e.oRS(" ","\\tag*{(6)}=1-(1-\\alpha)^{k}","\n"),e.yG2(4),e.cNF("h_{k}"),e.yG2(3),e.oRS(" ","\\tag*{}\\delta_{k} = \\begin{cases} 1, & k=0 \\\\ 0, & k \\neq 0 \\end{cases}","\n"),e.yG2(3),e.oRS(" ","\\tag*{}h_{k}=\\alpha\\sum\\limits_{m=0}^{\\infty}{(1-\\alpha)^{m}x_{k-m}}","\n"),e.yG2(2),e.oRS(" ","\\tag*{}=\\alpha\\sum\\limits_{m=0}^{\\infty}{(1-\\alpha)^{m}\\delta_{k-m}}","\n"),e.yG2(2),e.oRS(" ","\\tag*{(7)}=\\alpha(1-\\alpha)^{k}","\n"),e.yG2(9),e.cNF("2"),e.yG2(3),e.cNF("1"),e.yG2(3),e.cNF("-1"),e.yG2(2),e.CI5("href","/",a.froaiNote.route,"",e.K6U),e.yG2(),e.cNF(a.froaiNote.title),e.yG2(4),e.E7m("subfig","(a)")("width","100%")("height",a.freqsH)("ymode","amplitudePct")("xmode","period")("maxPeriod",a.maxPeriod)("data",a.freqs)("settingsPanelVisible",a.unlocked),e.yG2(),e.E7m("subfig","(b)")("width","100%")("height",a.freqsH)("ymode","phaseDegUnwrapped")("xmode","period")("maxPeriod",a.maxPeriod)("minDeg",-180)("maxDeg",180)("data",a.freqs)("settingsPanelVisible",a.unlocked),e.yG2(),e.E7m("ngIf",a.unlocked),e.yG2(7),e.cNF("\\tau"),e.yG2(3),e.cNF("\\nu"),e.yG2(3),e.cNF("\\tau = \\frac{1}{\\nu}"),e.yG2(3),e.cNF("\\tau = 2"),e.yG2(3),e.cNF("\\nu = \\frac{1}{\\tau} = \\frac{1}{2}"),e.yG2(3),e.cNF("1"),e.yG2(3),e.cNF("0"),e.yG2(3),e.cNF("\\tau"),e.yG2(3),e.cNF("1"),e.yG2(3),e.cNF("\\tau = 2"),e.yG2(4),e.E7m("subfig","(a)")("width","100%")("height",200)("ymode","amplitudePct")("xmode","period")("maxPeriod",40)("data",e.WuN(144,f,a.ema2,a.ema5,a.ema10,a.ema20))("settingsPanelVisible",a.unlocked),e.yG2(),e.E7m("subfig","(b)")("width","100%")("height",200)("ymode","amplitudePct")("xmode","frequency")("data",e.WuN(149,f,a.ema2,a.ema5,a.ema10,a.ema20))("settingsPanelVisible",a.unlocked),e.yG2(4),e.E7m("subfig","(a)")("width","100%")("height",200)("ymode","phaseDeg")("xmode","period")("maxPeriod",40)("minDeg",-70)("maxDeg",20)("data",e.WuN(154,f,a.ema2,a.ema5,a.ema10,a.ema20))("settingsPanelVisible",a.unlocked),e.yG2(),e.E7m("subfig","(b)")("width","100%")("height",200)("ymode","phaseDeg")("xmode","frequency")("minDeg",-70)("maxDeg",20)("data",e.WuN(159,f,a.ema2,a.ema5,a.ema10,a.ema20))("settingsPanelVisible",a.unlocked),e.yG2(7),e.oRS(" ","\\tag*{}Z\\{x[n]\\}\\Leftrightarrow\\sum\\limits_{n=0}^{\\infty}{x[n]z^{-n}}","\n"),e.yG2(3),e.cNF("z"),e.yG2(3),e.oRS(" ","\\tag*{}X(z)=Z\\{x[n]\\}, \\qquad Y(z)=Z\\{y[n]\\}","\n"),e.yG2(3),e.cNF("x[n]"),e.yG2(3),e.cNF("y[n]"),e.yG2(3),e.oRS(" ","\\tag*{}H(z)=\\frac{Y(z)}{X(z)}","\n"),e.yG2(4),e.oRS(" ","\\tag*{}Z\\{y(n - m)\\}\\Leftrightarrow z^{-m}Y(z)","\n"),e.yG2(2),e.oRS(" ","\\tag*{}Z\\{ax[n]+by[n]\\}\\Leftrightarrow aX(z)+bY(z)","\n"),e.yG2(3),e.oRS(" ","\\tag*{}Z\\{y[n]\\}=Z\\{\\alpha x[n]+(1-\\alpha)y[n-1]\\}","\n"),e.yG2(2),e.oRS(" ","\\tag*{}=\\alpha Z\\{x[n]\\}+(1-\\alpha)Z\\{y[n-1]\\}","\n"),e.yG2(2),e.oRS(" ","\\tag*{}=\\alpha Z\\{x[n]\\}+(1-\\alpha)z^{-1}Z\\{y[n]\\}","\n"),e.yG2(2),e.oRS(" ","\\tag*{}Y(z)=\\alpha X(z)+(1-\\alpha)z^{-1}Y(z)","\n"),e.yG2(2),e.oRS(" ","\\tag*{}Y(z)(1-(1-\\alpha)z^{-1})=\\alpha X(z)","\n"),e.yG2(2),e.oRS(" ","\\tag*{(8)}H(z)=\\frac{Y(z)}{X(z)}=\\frac{\\alpha}{1-(1-\\alpha)z^{-1}}","\n"),e.yG2(4),e.cNF("z=exp(-i\\omega)"),e.yG2(3),e.cNF("\\omega"),e.yG2(3),e.cNF("\\nu"),e.yG2(3),e.cNF("\\tau"),e.yG2(3),e.oRS(" ","\\tag*{}\\omega = 2\\pi\\nu = \\frac{2\\pi}{\\tau}","\n"),e.yG2(3),e.oRS(" ","\\tag*{(9)}H(\\omega)=\\frac{\\alpha}{1-(1-\\alpha)exp(-i\\omega)}","\n"),e.yG2(3),e.cNF("H(\\omega)"),e.yG2(3),e.cNF("exp(ix)=\\cos x+i\\sin x"),e.yG2(3),e.oRS(" ","\\tag*{}\\left|H(\\omega)\\right|^{2}=\\frac{\\alpha^{2}}{\\left|1-(1-\\alpha)exp(-i\\omega)\\right|^{2}}","\n"),e.yG2(2),e.oRS(" ","\\tag*{}=\\frac{\\alpha^{2}}{\\left|1-(1-\\alpha)(\\cos(-\\omega)+i\\sin(-\\omega))\\right|^{2}}","\n"),e.yG2(2),e.oRS(" ","\\tag*{}=\\frac{\\alpha^{2}}{(1-(1-\\alpha)\\cos(\\omega))^{2}+((1-\\alpha)\\sin(\\omega))^{2}}","\n"),e.yG2(2),e.oRS(" ","\\tag*{}=\\frac{\\alpha^{2}}{1-2(1-\\alpha)\\cos(\\omega)+(1-\\alpha)^{2}\\cos^{2}(\\omega)+(1-\\alpha)^{2}\\sin^{2}(\\omega)}","\n"),e.yG2(2),e.oRS(" ","\\tag*{(10)}=\\frac{\\alpha^{2}}{1-2(1-\\alpha)\\cos(\\omega)+(1-\\alpha)^{2}}","\n"),e.yG2(3),e.oRS(" ","\\tag*{(11)}\\left|H(\\omega)\\right|=\\frac{\\alpha}{\\sqrt{1-2(1-\\alpha)\\cos(\\omega)+(1-\\alpha)^{2}}}","\n"),e.yG2(3),e.cNF("H(\\omega)"),e.yG2(3),e.oRS(" ","\\tag*{(12)}\\phi(\\omega)=\\tan^{-1}\\left( \\frac{-(1-\\alpha)\\sin\\omega}{1-(1-\\alpha)\\cos\\omega} \\right)","\n"),e.yG2(3),e.cNF("\\phi(\\omega)"),e.yG2(3),e.oRS(" ","\\tag*{(13)}bar\\ lag=\\frac{\\phi(\\omega)}{\\omega}","\n"))},dependencies:[d.u_,h.ot,h.O4,h.ue,h.Gu,h._t,h._G,C.Up,C.w5,_.yi,g.qL,u._s,u.nm,u.CM,Y.cP,o.wvz,o.aXd,o.m49,o.M1E,M.U,o.ay5,z],styles:[".ohlcv-chart-study[_ngcontent-%COMP%]{margin:0;padding:0}.button[_ngcontent-%COMP%]{margin-right:8px}.slide-toggle[_ngcontent-%COMP%]{float:right;margin:0 8px 0 0}.icon[_ngcontent-%COMP%]{vertical-align:bottom}"],changeDetection:0})}return i})()},{path:"**",redirectTo:""}];let B=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.a4G({type:i});static#a=this.\u0275inj=e.s3X({imports:[G.qQ.forChild(j),G.qQ]})}return i})(),Q=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.a4G({type:i});static#a=this.\u0275inj=e.s3X({imports:[d.MD,h.y,C.wb,_.cN,O.oJ,g.oB,u.CU,Y.GE,S.CQ,o._09,o.uGV,o.opz,o.yqe,o.wHW,o.UTm,o.a4T,q.G,o.Gaf,B]})}return i})()}}]);